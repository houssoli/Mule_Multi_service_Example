<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Managing Log Files</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Managing Log Files</h1>
</div>
<br>



<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Managing log file naming, and rolling over policies </p>
</div>

<h1><a name="ManagingLogFiles-Overview"></a>Overview</h1>
<p>The log file names, location and format are all properties of the Java log <tt>Handler</tt>. GigaSpaces uses a rolling file handler implemented by the class <tt>com.gigaspaces.logger.<b>RollingFileHandler</b></tt>, which is based on Java's <tt>java.util.logging.FileHandler</tt>, but with extended functionality. It provides two policies that can trigger a "rollover" to a new file, and a customizable extension point for backing up files.</p>

<h1><a name="ManagingLogFiles-RollingOvertoaNewFile"></a>Rolling Over to a New File</h1>
<p>The rollover mechanism is based on two policies, whichever policy is triggered first: </p>
<ul>
	<li>File size rolling policy (default 2MB)</li>
	<li>Time based rolling policy (default is daily)</li>
</ul>


<h1><a name="ManagingLogFiles-%7B%7Bformatter%7D%7Dproperty"></a><tt>formatter</tt> property</h1>
<p>The default log output formatting is determined by <tt>GSSimpleFormatter</tt> (see <a href="Formatting Log Messages.html" title="Formatting Log Messages">Formatting Log Messages</a>).</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.formatter = com.gigaspaces.logger.GSSimpleFormatter</pre>
</div></div>

<h1><a name="ManagingLogFiles-%7B%7Bfilenamepattern%7D%7DProperty"></a><tt>filename-pattern</tt> Property</h1>
<p>The file name pattern can be configured to include a placeholder for properties to resolve, such as homedir, host, pid and date. Each placeholder is identified by a set of curly brackets {..}. It may also be a placeholder for a custom defined property.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.filename-pattern = {homedir}/logs/{date,yyyy-MM-dd~HH.mm}-gigaspaces-{service}-{host}-{pid}.log</pre>
</div></div>
<p>To determine the place holder's value, we first look for an overriding system property. If no override was specified, and the property is one of the predefined properties (i.e. homedir, host, pid, date), its value is evaluated by the handler implementation. If the place holder is of a custom property, and no value is defined, the property is left as is. If any error occurs, it is reported and the property is replaced by an empty string. Example override by system property: </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">-Dcom.gigaspaces.logger.RollingFileHandler.filename-pattern.date=yyyy-MM-dd</pre>
</div></div>

<h5><a name="ManagingLogFiles-CustomizationExamples"></a>Customization Examples</h5>

<p><b>1.</b> One possible customization that might be of interest is to separate the log files into folders named after the host names.<br/>
To achieve this, the pattern would need to have the {host} placeholder as one of the directory paths - as follows:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.filename-pattern = {homedir}/logs/{host}/{date,yyyy-MM-dd~HH.mm}-gigaspaces-{service}-{pid}.log

&lt;GigaSpace&gt;/logs/
  + host1
      - *.log
  + host2
      - *.log</pre>
</div></div>


<p><b>2.</b> We would like to be able to configure the path where GigaSpaces puts its logs.<br/>
Set the {<tt>homedir</tt>} property placeholder with the following system property:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">-Dcom.gigaspaces.logger.RollingFileHandler.filename-pattern.homedir = /dev/output/logs</pre>
</div></div>
<p>And have the <tt>filename-pattern</tt> include the <tt>homedir</tt> key</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.filename-pattern = {homedir}/mylog.log</pre>
</div></div>

<p><b>3.</b> We would like to configure a custom filename-pattern property of our own.<br/>
Set a {<tt>mycustom</tt>} property placeholder with the following system property:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">-Dcom.gigaspaces.logger.RollingFileHandler.filename-pattern.mycustom = value</pre>
</div></div>
<p>And have the <tt>filename-pattern</tt> include the <tt>mycustom</tt> property key</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.filename-pattern = ../{mycustom}/mylog.log</pre>
</div></div>

<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> Note that the property value will have illegal path characters removed. (e.g. <tt>/\:*?"&lt;&gt;|</tt>)</p>


<h1><a name="ManagingLogFiles-%7B%7Bappend%7D%7DProperty"></a><tt>append</tt> Property</h1>
<p>The append property specifies if output should be appended to an existing file. Default is set to false. Thus, if a file already exists by this name, a unique incrementing index to resolve the conflict will be concatenated. It will be added at the end of the filename replacing ".log" with "__{unique}.log" or at the end of the filename if the pattern doesn't end with ".log". </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.append = <span class="code-keyword">false</span></pre>
</div></div>

<h1><a name="ManagingLogFiles-%7B%7Bsizerollingpolicy%7D%7DProperty"></a><tt>size-rolling-policy</tt> Property</h1>
<p>The file size rolling policy can be configured to roll the file when a size limit is reached. It specifies an approximate maximum amount to write (in bytes) to any one file. If this is zero, then there is no limit. If the property is omitted, then a default of 2MB is assumed.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.size-rolling-policy = 2000000</pre>
</div></div>

<h1><a name="ManagingLogFiles-%7B%7Btimerollingpolicy%7D%7DProperty"></a><tt>time-rolling-policy</tt> Property</h1>
<p>The time based rolling policy can be configured to roll the file based on a certain recurring schedule. The time policy can be set to one of the following values: daily, weekly, monthly or yearly. If the property is omitted, then the default pattern of "daily" is assumed; meaning a daily rollover (at midnight). For example, if "monthly" is configured, the file will rollover at the beginning of each month. </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.time-rolling-policy = daily</pre>
</div></div>

<h1><a name="ManagingLogFiles-%7B%7Bbackuppolicy%7D%7DProperty"></a><tt>backup-policy</tt> Property</h1>
<p>A backup-policy can be configured to backup files. By default a <b>NullBackupPolicy</b> is configured, which does nothing. It can be replaced by a <b>DeleteBackupPolicy</b> to keep a backup of files for a specified period. The <b>BackupPolicy</b> interface allows custom implementations to be plugged-in.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.backup-policy = com.gigaspaces.logger.DeleteBackupPolicy 
com.gigaspaces.logger.DeleteBackupPolicy.period = 30 
com.gigaspaces.logger.DeleteBackupPolicy.backup = 10</pre>
</div></div>

<p>For more information see <a href="Backing-up Files With a Custom Policy.html" title="Backing-up Files With a Custom Policy">Backing&#45;up Files With a Custom Policy</a></p>

<h1><a name="ManagingLogFiles-%7B%7Bdebuglevel%7D%7DProperty"></a><tt>debug-level</tt> Property</h1>
<p>The debug level (configured to one of logging Levels) is the level in which debug messages are displayed to the "standard" output stream. By default the level is configured to "CONFIG" which displays the log file name. </p>

<p>"<em>Log file: /export/users/gs/gigaspaces-xap/logs/2010-08-04~12.29-gigaspaces-cli-lab1-4422.log</em>"</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">com.gigaspaces.logger.RollingFileHandler.debug-level = CONFIG</pre>
</div></div>

<p>This can also be overridden by a system property.</p>

<h1><a name="ManagingLogFiles-Systempropertyoverrides"></a>System property overrides</h1>
<p>Any of the logger properties can be configured by a system property override, specified as follows: <br/>
<tt>-Dcom.gigaspaces.logger.RollingFileHandler.[property-name]=[property-value]</tt></p>

<p>For example:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">-Dcom.gigaspaces.logger.RollingFileHandler.debug-level=OFF</pre>
</div></div>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
