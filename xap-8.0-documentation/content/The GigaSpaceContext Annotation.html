<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : The GigaSpaceContext Annotation</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>The GigaSpaceContext Annotation</h1>
</div>
<br>

<script type='text/javascript'>//<![CDATA[
function debug() { }
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/browser.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/behaviour.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/memory.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/cloak.js'>//<![CDATA[
// ]]></script><script type='text/javascript'>//<![CDATA[
Cloak.closeHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_down_10.gif\'/>";
Cloak.openHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_right_10.gif\'/>";
Cloak.toggleZone = true;
Cloak.memoryDuration = 0;
Cloak.memoryPrefix = "contentId:53903634";
Cloak.memoryPath = "/wiki/";
// ]]></script><style type='text/css'>
.cloakToggle { /* Definition for state toggling image */
cursor:hand;
cursor:pointer;
}
</style><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/transitions.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/deck.js'>//<![CDATA[
// ]]></script><link rel='stylesheet' type='text/css'  href='/wiki/styles/main-action.css?pluginCompleteKey=net.customware.confluence.plugin.composition:composition-setup&stylesheetName=deck&spaceKey=XAP8'/><script type='text/javascript'>//<![CDATA[
Deck.memoryDuration = 0;
Deck.memoryPrefix = "contentId:53903634";
Deck.memoryPath = "/wiki/";
// ]]></script>


<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Allows you to inject a predefined <tt>GigaSpace</tt> instance using annotations. </p>
</div>

<h1><a name="TheGigaSpaceContextAnnotation-GigaSpaceContext"></a>GigaSpace Context</h1>

<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Annotation Based Injection with Spring</b><br />In previous Spring releases, Spring only allowed you to inject the <a href="The GigaSpace Interface.html" title="The GigaSpace Interface">GigaSpace</a> instace using setter injection or constructor injection. OpenSpaces extended this injection mechanism by allowing you to use annotations to inject a <tt>GigaSpace</tt> instance.<br/>
<b>As of Spring 2.5, this is no longer required</b> since Spring support annotation based injection using the <a href="http://download.oracle.com/javaee/6/api/javax/annotation/Resource.html"><tt>@Resource</tt></a> or <a href="http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/annotation/Autowired.html"><tt>@Autowired</tt></a> annotations.</td></tr></table></div>

<p>The following code uses the annotation-based injection:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> class MyService {

    @GigaSpaceContext
    <span class="code-keyword">private</span> GigaSpace gigaSpace;

}</pre>
</div></div>

<p>In the above case, there is no need to have a setter for the <tt>GigaSpace</tt> instance, and by annotating it with <tt>GigaSpaceContext</tt>, a <tt>GigaSpace</tt> instance is automatically injected. In order to enable this feature, the following element needs to be configured in the Spring application context:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="TheGigaSpaceContextAnnotation-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:giga-space-context/&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div> 


<h5><a name="TheGigaSpaceContextAnnotation-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpaceContext"</span> class=<span class="code-quote">"org.openspaces.core.context.GigaSpaceContextBeanPostProcessor"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div>
</div></div>

<h1><a name="TheGigaSpaceContextAnnotation-GigaSpaceLateContext"></a>GigaSpace Late Context</h1>

<p>OpenSpaces allows you to define beans (such as filters), that are later injected to the actual space. If such beans require access to the <tt>GigaSpace</tt> instance, a cyclic dependency occurs (<tt>GigaSpace</tt> requires the <tt>Space</tt>, but the <tt>Space</tt> requires the filter injection). OpenSpaces allows you to use the same annotation-based injection mechanism in order to inject the <tt>GigaSpace</tt> instance at a different lifecycle stage.</p>

<p>The following code uses the annotation-based injection:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> class MyService {

    @GigaSpaceLateContext
    <span class="code-keyword">private</span> GigaSpace gigaSpace;

}</pre>
</div></div>

<p>In the above case, there is no need to have a setter for the <tt>GigaSpace</tt> instance, and by annotating it with <tt>GigaSpaceLateContext</tt>, a <tt>GigaSpace</tt> instance is automatically injected. In order to enable this feature, the following element needs to be configured in the Spring application context:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="TheGigaSpaceContextAnnotation-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:giga-space-late-context/&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div> 


<h5><a name="TheGigaSpaceContextAnnotation-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpaceContext"</span> class=<span class="code-quote">"org.openspaces.core.context.GigaSpaceLateContextBeanPostProcessor"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div>
</div></div>

<h1><a name="TheGigaSpaceContextAnnotation-MultipleGigaSpaceInstances"></a>Multiple GigaSpace Instances</h1>

<p>There can be more than one <tt>GigaSpace</tt> instance defined within the same Spring application context. In such cases, the annotation-based injection requires the ID of the <tt>GigaSpace</tt> instance it should inject. You should use the <b>name</b> property to identify it.</p>

<p>The following code uses the annotation-based injection (note the <b>name</b> property usage):</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> class MyService {

    @GigaSpaceContext(name=<span class="code-quote">"directGigaSpace"</span>)
    <span class="code-keyword">private</span> GigaSpace directGigaSpace;

    @GigaSpaceContext(name=<span class="code-quote">"clusteredGigaSpace"</span>)
    <span class="code-keyword">private</span> GigaSpace clusteredGigaSpace;
}</pre>
</div></div>

<p>In the above case, there is no need to have a setter for the <tt>GigaSpace</tt> instance, and by annotating it with <tt>GigaSpaceContext</tt>, a <tt>GigaSpace</tt> instance is automatically injected. In order to enable this feature, the following element needs to be configured in the Spring application context:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="TheGigaSpaceContextAnnotation-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:giga-space-context/&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"directGigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"clusteredGigaSpace"</span> space=<span class="code-quote">"space"</span> clustered=<span class="code-quote">"true"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div> 


<h5><a name="TheGigaSpaceContextAnnotation-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpaceContext"</span> class=<span class="code-quote">"org.openspaces.core.context.GigaSpaceContextBeanPostProcessor"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"directGigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"clusteredGigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
	<span class="code-tag">&lt;proeprty name=<span class="code-quote">"clustered"</span> value=<span class="code-quote">"true"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"myService"</span> class=<span class="code-quote">"eg.MyService"</span> /&gt;</span></pre>
</div></div>
</div></div>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
