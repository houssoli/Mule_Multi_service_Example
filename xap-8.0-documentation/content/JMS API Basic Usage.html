<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : JMS API Basic Usage</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>JMS API Basic Usage</h1>
</div>
<br>

<script type='text/javascript'>//<![CDATA[
function debug() { }
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/browser.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/behaviour.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/memory.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/cloak.js'>//<![CDATA[
// ]]></script><script type='text/javascript'>//<![CDATA[
Cloak.closeHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_down_10.gif\'/>";
Cloak.openHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_right_10.gif\'/>";
Cloak.toggleZone = true;
Cloak.memoryDuration = 0;
Cloak.memoryPrefix = "contentId:53903441";
Cloak.memoryPath = "/wiki/";
// ]]></script><style type='text/css'>
.cloakToggle { /* Definition for state toggling image */
cursor:hand;
cursor:pointer;
}
</style><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/transitions.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/deck.js'>//<![CDATA[
// ]]></script><link rel='stylesheet' type='text/css'  href='/wiki/styles/main-action.css?pluginCompleteKey=net.customware.confluence.plugin.composition:composition-setup&stylesheetName=deck&spaceKey=XAP8'/><script type='text/javascript'>//<![CDATA[
Deck.memoryDuration = 0;
Deck.memoryPrefix = "contentId:53903441";
Deck.memoryPath = "/wiki/";
// ]]></script>


<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Basic JMS API Usage </p>
</div>
<h1><a name="JMSAPIBasicUsage-BasicJMSWorkflow"></a>Basic JMS Workflow</h1>

<ol>
	<li>Obtain/create a <tt>ConnectionFactory</tt> instance.</li>
	<li>Create a <tt>Connection</tt> with the <tt>ConnectionFactory</tt>.</li>
	<li>Create a <tt>Session</tt> with the <tt>Connection</tt>.</li>
	<li>Obtain/create a <tt>Destination</tt> (<tt>Topic</tt> or <tt>Queue</tt>).</li>
	<li>Message production:
	<ol>
		<li>Create <tt>MessageProducers</tt> with the <tt>Session</tt> and the destination.</li>
		<li>Create a <tt>Message</tt> with the <tt>Session</tt>.</li>
		<li>Send the <tt>Message</tt> with the <tt>MessageProducer</tt>.</li>
	</ol>
	</li>
	<li>Message Consumption:
	<ol>
		<li>Create <tt>MessageConsumers</tt> with the <tt>Session</tt> and the destination.</li>
		<li>Enable connection message consumption by calling the <tt>Connection.start()</tt> method.</li>
		<li>For synchronous consumption, call the <tt>MessageConsumer.receive()</tt> method.</li>
		<li>For asynchronous consumption, set the <tt>MessageConsumer</tt> <tt>MessageListener</tt>, and implement the <tt>onMessage()</tt> method.</li>
	</ol>
	</li>
	<li>When the application finishes, release all resources by closing the connection.</li>
</ol>


<h1><a name="JMSAPIBasicUsage-UsingUnifiedMessagingModel%28JMS1.1%29"></a>Using Unified Messaging Model (JMS 1.1)</h1>

<p><span id='tgl_content_X' class='cloakToggle'></span><font color="#6999cb"><b>Click to see the code example:</b></font></p>


<div class="panel" style="background-color: white;border-style: none;border-width: 1px;"><div class="panelContent" style="background-color: white;">
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">ConnectionFactory connectionFactory = <span class="code-comment">// obtain
</span>Connection connection = connectionFactory.createConnection();
Session session = connection.createSession(<span class="code-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);
Queue destination = <span class="code-comment">// obtain (the destination can also be a Topic)
</span>
<span class="code-comment">// producer code
</span>MessageProducer producer = session.createProducer(destination);
Message msg = session.createMessage();
<span class="code-keyword">for</span> (...) {
	producer.send(msg);
}

<span class="code-comment">// consumer code
</span>
<span class="code-comment">// synchronous consumer code
</span>MessageConsumer consumer = session.createConsumer(destination);
<span class="code-keyword">for</span> (...) {
	Message msg = consumer.receive();
	...
}

<span class="code-comment">// asynchronous consumer code
</span>MessageConsumer consumer = session.createConsumer(destination);
consumer.setMessageListener(<span class="code-keyword">new</span> MessageListener() {
	<span class="code-keyword">public</span> void onMessage(Message msg) {
		...
	}
});

<span class="code-comment">// start the connection to receive messages
</span>connection.start();

<span class="code-comment">// release resources
</span>connection.close();</pre>
</div></div>
</div></div>



<h1><a name="JMSAPIBasicUsage-UsingSeparateDomains%28JMS1.0.2%29"></a>Using Separate Domains (JMS 1.0.2)</h1>

<h2><a name="JMSAPIBasicUsage-Publish%2FSubscribe"></a>Publish/Subscribe</h2>

<p><span id='tgl_content_y' class='cloakToggle'></span><font color="#6999cb"><b>Click to see the code example:</b></font></p>


<div class="panel" style="background-color: white;border-style: none;border-width: 1px;"><div class="panelContent" style="background-color: white;">
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">TopicConnectionFactory topicConnectionFactory = <span class="code-comment">// obtain
</span>TopicConnection topicConnection = topicConnectionFactory.createTopicConnection();
TopicSession topicSession = topicConnection.createTopicSession
(<span class="code-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);
Topic destination = <span class="code-comment">// obtain
</span>
<span class="code-comment">// producer code
</span>TopicPublisher publisher = topicSession.createPublisher();
Message msg = topicSession.createMessage();
<span class="code-keyword">for</span> (...) {
	publisher.send(msg);
}

<span class="code-comment">// consumer code
</span>
<span class="code-comment">// synchronous consumer code
</span>TopicSubscriber subscriber = topicSession.createSubscriber(destination);
<span class="code-keyword">for</span> (...) {
	Message msg = subscriber.receive();
	...
}

<span class="code-comment">// asynchronous consumer code
</span>TopicSubscriber subscriber = topicSession.createSubscriber(destination);
subscriber.setMessageListener(<span class="code-keyword">new</span> MessageListener() {
	<span class="code-keyword">public</span> void onMessage(Message msg) {
		...
	}
});

<span class="code-comment">// start the connection to receive messages
</span>topicConnection.start();

<span class="code-comment">// release resources
</span>topicConnection.close();</pre>
</div></div>
</div></div>



<h2><a name="JMSAPIBasicUsage-PointtoPoint"></a>Point to Point</h2>

<p><span id='tgl_content_z' class='cloakToggle'></span><font color="#6999cb"><b>Click to see the code example:</b></font></p>


<div class="panel" style="background-color: white;border-style: none;border-width: 1px;"><div class="panelContent" style="background-color: white;">
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">QueueConnectionFactory queueConnectionFactory = <span class="code-comment">// obtain
</span>QueueConnection queueConnection = queueConnectionFactory.createQueueConnection();
QueueSession queueSession = queueConnection.createQueueSession
(<span class="code-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);
Queue destination = <span class="code-comment">// obtain
</span>
<span class="code-comment">// producer code
</span>QueueSender sender = queueSession.createSender(destination);
Message msg = qSession.createMessage();
<span class="code-keyword">for</span> (...) {
	sender.send(msg);
}

<span class="code-comment">// consumer code
</span>
<span class="code-comment">// synchronous consumer code
</span>QueueReceiver receiver = queueSession.createReceiver(destination);
<span class="code-keyword">for</span> (...) {
	Message msg = receiver.receive();
	...
}

<span class="code-comment">// asynchronous consumer code
</span>QueueReceiver receiver = queueSession.createReceiver(destination);
receiver.setMessageListener(<span class="code-keyword">new</span> MessageListener() {
	<span class="code-keyword">public</span> void onMessage(Message msg) {
		...
	}
});

<span class="code-comment">// start the connection to receive messages
</span>queueConnection.start();

<span class="code-comment">// release resources
</span>queueConnection.close();</pre>
</div></div>
</div></div>



                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
