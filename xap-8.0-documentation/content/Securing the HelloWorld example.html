<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Securing the HelloWorld example</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Securing the HelloWorld example</h1>
</div>
<br>



<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Get started with a simple HelloWorld example <img class="emoticon" src="images/icons/emoticons/star_yellow.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </p>
</div>

<h1><a name="SecuringtheHelloWorldexample-Introduction"></a>Introduction</h1>

<p>If you are new to the <b>Hello World</b> example, we suggest to first cover the <a href="http://www.gigaspaces.com/wiki/display/XAP8/Introductory+Screencasts+Panel" title="Introductory Screencasts Panel">introductory screencasts</a>.<br/>
We provide a short overview of the example, and get you started with applying security aspects to it.</p>

<p><img src="download/attachments/17301573/source.gif" align="absmiddle" border="0"/> The example distribution can be found under <tt>&lt;GigaSpaces root&gt;/examples/helloworld</tt>.</p>

<h1><a name="SecuringtheHelloWorldexample-Overview"></a>Overview</h1>
<p>We have a processor bean that will process <tt>HelloObjects</tt> - it works with a polling container to talk to with a Space, all inside of a <tt>Helloworld</tt> Processing Unit. External to that process is the <tt>Feeder</tt> application, which gets a remote proxy to the Space and uses it to write objects (#1). The <tt>HelloObject</tt> written to the Space becomes interesting to the polling container. The polling container will take it out of the Space (#2), hand it to the <tt>HelloWorld</tt> processor bean for processing, and then write the results back to the Space (#3). In this case a <tt>ProcessedHelloObject</tt>. Later, our feeder application can read the results (#4) and print them out to the screen.</p>

<p><img src="download/attachments/53903614/helloworld.png" align="absmiddle" border="0"/></p>

<h1><a name="SecuringtheHelloWorldexample-Whatneedstobesecured%3F"></a>What needs to be secured?</h1>

<p>Obviously we want to protect the Space data (containing both <tt>HelloObject</tt> and <tt>ProcessedHelloObject</tt>). We need to first define the Space as secured. The processor beans' polling container needs to be granted <b><tt>Take</tt></b> access for <tt>HelloObject</tt> and <b><tt>Write</tt></b> access for <tt>ProcessedHelloObject</tt>. Secondly, the <tt>Feeder</tt> which gains a remote proxy to the Space, needs to be granted <b><tt>Write</tt></b> access for <tt>HelloObject</tt> and <b><tt>Read</tt></b> access for <tt>ProcessedHelloObject</tt>.</p>

<h1><a name="SecuringtheHelloWorldexample-SecuringtheSpace"></a>Securing the Space</h1>

<p>Lets define a secured space in <tt>hello-processor/META-INF/spring/pu.xml</tt> by adding the <b><tt>secured</tt></b> namespace property. This can also be accomplished by adding the <tt>secured</tt> Space URL property.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;!-- pu.xml --&gt;
&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./processorSpace"</span>&gt;
   &lt;os-core:security secured=<span class="code-quote">"<span class="code-keyword">true</span>"</span>/&gt;
&lt;/os-core:space&gt;</pre>
</div></div>

<h1><a name="SecuringtheHelloWorldexample-Grantingaccesstotheembeddedpollingcontainer"></a>Granting access to the embedded polling container</h1>

<p>Accessing the secured space requires a <em>principal</em>. In this case the <em>principal</em> is the processor beans' polling container.<br/>
Lets assume the principals' credentials are: <tt>username</tt>="helloProcessor" and <tt>password</tt>="helloWorld".</p>

<p>There are two options for providing the principal credentials. The first, is by adding the credentials in <tt>pu.xml</tt>. The drawback is that the credentials are exposed. The second, which is preferred, is during deployment of the processing unit.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./processorSpace?secured"</span>&gt;
    &lt;os-core:security username=<span class="code-quote">"helloProcessor"</span> password=<span class="code-quote">"helloWorld"</span>/&gt;
&lt;/os-core:space&gt;</pre>
</div></div>

<h1><a name="SecuringtheHelloWorldexample-Grantingaccesstothe%7B%7BFeeder%7D%7D"></a>Granting access to the <tt>Feeder</tt></h1>

<p>The <tt>Feeder</tt> in this example is not a processing unit. It is just an external process acquiring a remote proxy to the Space.<br/>
Lets take a look at the <tt>Feeder</tt> constructor.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> Feeder(<span class="code-object">String</span> url){
  IJSpace space = <span class="code-keyword">new</span> UrlSpaceConfigurer(url).space(); 
  <span class="code-keyword">this</span>.gigaSpace = <span class="code-keyword">new</span> GigaSpaceConfigurer(space).gigaSpace();
}</pre>
</div></div>

<p>The feeder needs to be granted access for operations it will perform on the remote secured Space. In this case the feeder is the <em>principal</em>. Lets assume the principals' credentials are: <tt>username</tt>="helloFeeder" and <tt>password</tt>="feedTheWorld".</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> Feeder(<span class="code-object">String</span> url){
  IJSpace space = <span class="code-keyword">new</span> UrlSpaceConfigurer(url).userDetails(<span class="code-quote">"helloFeeder"</span>, <span class="code-quote">"feedTheWorld"</span>).space(); 
  <span class="code-keyword">this</span>.gigaSpace = <span class="code-keyword">new</span> GigaSpaceConfigurer(space).gigaSpace();
}</pre>
</div></div>

<h1><a name="SecuringtheHelloWorldexample-Declaringtheprincipals"></a>Declaring the principals</h1>

<p>Managing the users and their authorities can either be done using the UI or API.</p>

<p>We have two users to declare - "helloProcessor" and the other "helloFeeder".<br/>
The "helloProcessor" user will be granted <b><tt>Take</tt></b> access for <tt>HelloObject</tt> and <b><tt>Write</tt></b> access for <tt>ProcessedHelloObject</tt>.<br/>
The "helloFeeder" user will be granted <b><tt>Write</tt></b> access for <tt>HelloObject</tt> and <b><tt>Read</tt></b> access for <tt>ProcessedHelloObject</tt></p>

<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> Some implementation notes:</p>
<ul>
	<li>The <tt>ProcessedHelloObject</tt> is fictive. Actually the <tt>Feeder</tt> waits for <tt>HelloObject</tt> template matching the "Hello World !!" String.</li>
	<li>The <tt>HelloObject</tt> was replaced by a <tt>Message</tt> Object in the products example. Thus the actual class that should be granted privileges for is <tt>org.openspaces.example.helloworld.common.Message</tt>.</li>
</ul>


<p>Lets look at how easily it can be using the <a href="GigaSpaces Management Center (UI) Security.html" title="GigaSpaces Management Center (UI) Security">GigaSpaces Management Center &#40;UI&#41; Security</a><br/>
<img src="download/attachments/53903614/helloWorldUsers.png" align="absmiddle" border="0"/></p>

<h1><a name="SecuringtheHelloWorldexample-RunningtheExample"></a>Running the Example</h1>

<p>There are a couple of deployment options. For example deploying using the ant build script or the UI.<br/>
<img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> To simplify this example we will assume that the Service Grid components are <b>not</b> secured.</p>

<ol>
	<li>Start a GSM</li>
	<li>Start a GSC</li>
	<li>Run the build <tt>deploy-processor</tt> target</li>
	<li>Run the build <tt>run-feeder</tt> target</li>
</ol>


<p><img class="emoticon" src="images/icons/emoticons/star_yellow.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> Congratulations! You have just deployed your first secured application.</p>

<h1><a name="SecuringtheHelloWorldexample-SecuredServiceGrid"></a>Secured Service Grid</h1>

<p>To complete this example, we will give a brief overview of what needs to be done to deploy into a secured Service Grid.</p>

<p>In a secured Service Grid, the GSM and GSC are secured. This means that in order to deploy, you must have <b><tt>Provision PU</tt></b> privileges. Declare another principal with <b><tt>Provision PU</tt></b>, that will be used for deploying.</p>

<p>Using the UI, <em>Login</em> with this principals' credentials, and open the deployment wizard to deploy the <tt>processor</tt>.<br/>
Now, all that is left is to run the feeder as an external application.</p>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
