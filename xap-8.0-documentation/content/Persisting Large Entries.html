<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Persisting Large Entries</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Persisting Large Entries</h1>
</div>
<br>




<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  What to do when Entry arrays or collection attribute types are very large, so that the database cannot store them in a one-column cell. </p>
</div>
<h1><a name="PersistingLargeEntries-Overview"></a>Overview</h1>

<p>When persisting a space with JDBC, there are situations where Entry arrays or collection attribute types are very large and the database in use cannot store such objects in a one-column cell. In such situations, the following recommendations might help:</p>
<ul>
	<li>Split the large collection into smaller collections. This can be done via a business logic that groups collection elements. For example, instead of one collection attribute with 2000 members, you can have 4 attributes with 500 elements.</li>
	<li>Store collection attribute element references (UID) as part of the parent object, and have each collection element as a separate Entry in the space. This pattern splits large Entry objects into many Entries, which are mapped into many database table rows without having a serialized form of the collection content. This slows the performance when you read the whole object graph (the object and all its child objects) from the database.</li>
	<li>Use large BLOBs (Binary Large OBjects) &#8211; these allow you to persist large Entry binary fields (smaller than 4G). BLOBs are defined as <tt>binary=BLOB</tt> in the type.properties configuration file. Using BLOBs with Oracle database is explained <a href="#PersistingLargeEntries-1">below</a>.</li>
</ul>


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>New in GigaSpaces 5.2</b><br /><em>Big BLOBs</em> are supported in GigaSpaces version 5.2 and onwards </td></tr></table></div> 
<p><a name="PersistingLargeEntries-1"></a></p>
<h2><a name="PersistingLargeEntries-UsingBLOBswithOracleDatabase"></a>Using BLOBs with Oracle Database</h2>

<p>To store large binary fields using BLOBs with Oracle 9i and earlier versions, add the following line to the jdbc.properties file:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>lobHandlerClass=com.j_spaces.sadapter.GenericJDBC.OracleLobHandler
(default = com.j_spaces.sadapter.GenericJDBC.DefaultLobHandler)
</pre>
</div></div>
<p>Oracle LOB definitions can be customized in the <tt>jdbc.properties</tt> using the <tt>LOB</tt> clause while creating a table, for example:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>CREATE TABLE ContainsLOB_tab (n NUMBER, c BLOB) LOB  (c) STORE AS SEGNAME
(TABLESPACE lobtbs1 CHUNK 4096PCTVERSION 5NOCACHE LOGGINGSTORAGE (MAXEXTENTS 5));
</pre>
</div></div>
<p>Each Entry class with large fields can be customized in the <tt>jdbc.properties</tt> in the following way:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>entryClassName.lobClause = LOB  (c) STORE AS SEGNAME (
TABLESPACE lobtbs1 CHUNK 4096PCTVERSION 5NOCACHE LOGGINGSTORAGE (MAXEXTENTS 5));
</pre>
</div></div>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
