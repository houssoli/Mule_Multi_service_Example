<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Polling Container</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Polling Container</h1>
</div>
<br>

<script type='text/javascript'>//<![CDATA[
function debug() { }
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/browser.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/behaviour.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/memory.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/cloak.js'>//<![CDATA[
// ]]></script><script type='text/javascript'>//<![CDATA[
Cloak.closeHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_down_10.gif\'/>";
Cloak.openHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_right_10.gif\'/>";
Cloak.toggleZone = true;
Cloak.memoryDuration = 0;
Cloak.memoryPrefix = "contentId:53903408";
Cloak.memoryPath = "/wiki/";
// ]]></script><style type='text/css'>
.cloakToggle { /* Definition for state toggling image */
cursor:hand;
cursor:pointer;
}
</style><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/transitions.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/deck.js'>//<![CDATA[
// ]]></script><link rel='stylesheet' type='text/css'  href='/wiki/styles/main-action.css?pluginCompleteKey=net.customware.confluence.plugin.composition:composition-setup&stylesheetName=deck&spaceKey=XAP8'/><script type='text/javascript'>//<![CDATA[
Deck.memoryDuration = 0;
Deck.memoryPrefix = "contentId:53903408";
Deck.memoryPath = "/wiki/";
// ]]></script>


<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Allows you to perform polling receive operations against the space. </p>
</div>

<h1><a name="PollingContainer-Overview"></a>Overview</h1>

<p>The polling event container is an implementation of the <!--

Open a link in a new window

Syntax:
{lnew:<link>|<text>}

-->
<a HREF="http://enterpriseintegrationpatterns.com/PollingConsumer.html" TARGET="_blank">polling consumer pattern</a> which uses the space to receive events. It performs polling receive operations against the space. If a receive operation succeeds (a value is returned from the receive operation), the <a href="Data Event Listener.html" title="Data Event Listener">Data Event Listener</a> is invoked with the event. A polling event operation is mainly used when simulating Queue semantics or when using the master-worker design pattern.</p>

<p><img src="download/attachments/48235229/polling_container_basic.jpg" align="absmiddle" border="0"/></p>

<p>Here is a simple example of polling event container configuration:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag"><span class="code-comment">&lt;!-- Enable scan for OpenSpaces and Spring components --&gt;</span></span>
<span class="code-tag">&lt;context:component-scan base-package=<span class="code-quote">"com.mycompany"</span>/&gt;</span>

<span class="code-tag"><span class="code-comment">&lt;!-- Enable support for @Polling annotation --&gt;</span></span>
<span class="code-tag">&lt;os-events:annotation-support /&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span></pre>
</div></div> 

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling
<span class="code-keyword">public</span> class SimpleListener {

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-Code"></a>Code</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">GigaSpace gigaSpace = <span class="code-comment">// either create the GigaSpace or get it by injection
</span>
SimplePollingEventListenerContainer pollingEventListenerContainer = <span class="code-keyword">new</span> SimplePollingContainerConfigurer(gigaSpace)
                .template(<span class="code-keyword">new</span> Data(<span class="code-keyword">false</span>))
                .eventListenerAnnotation(<span class="code-keyword">new</span> <span class="code-object">Object</span>() {
                    @SpaceDataEvent
                    <span class="code-keyword">public</span> void eventHappened() {
                        eventCalled.set(<span class="code-keyword">true</span>);
                    }
                }).pollingContainer();
                
<span class="code-comment">// when needed dispose of the notification container
</span>pollingEventListenerContainer.destroy();</pre>
</div></div>
</div></div>

<p>The example above performs single take operations (see below) using the provided template (a <tt>Data</tt> object with its processed flag set to <tt>false</tt>). If the take operation succeeds (a value is returned), the <tt>SimpleListener</tt> is invoked. The operations are performed on the configured <a href="The GigaSpace Interface.html" title="The GigaSpace Interface">GigaSpace</a> bean (in this case, if working in a clustered topology, it is performed directly on the cluster member).</p>

<h1><a name="PollingContainer-Primary%2FBackup"></a>Primary/Backup</h1>

<p>The polling event container, by default, performs receive operations only when the relevant space it is working against is in primary mode. When the space is in backup mode, no receive operations are performed. If the space moves from backup mode to primary mode, the receive operations are started.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> This mostly applies when working with an embedded space directly with a cluster member. When working with a clustered space (performing operations against the whole cluster), the mode of the space is always primary.</p>

<h1><a name="PollingContainer-ConcurrentConsumers"></a>Concurrent Consumers</h1>

<p>By default, the polling event container starts a single thread that performs the receive operations and invokes the event listener. It can be configured to start several concurrent consumer threads and have an upper limit to the concurrent consumer threads. This provides faster processing of events, however, any FIFO behavior that might be configured in the space and/or template is lost. <br/>
<img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> You may start multiple polling containers consuming data in FIFO manner , each running a single consumer thread (consuming potentially a batch of space objects at a time) where each using a different template to scale the data consumption and processing activity. </p>

<p>Here is an example of a polling container with 3 concurrent consumers and 5 maximum concurrent consumers:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling(concurrentConsumers = 3, maxConcurrentConsumers = 5)
<span class="code-keyword">public</span> class SimpleListener {

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span> 
                             concurrent-consumers=<span class="code-quote">"3"</span> max-concurrent-consumers=<span class="code-quote">"5"</span>&gt;
    <span class="code-tag"><span class="code-comment">&lt;!-- ... --&gt;</span></span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"concurrentConsumers"</span> value=<span class="code-quote">"3"</span> /&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"maxConcurrentConsumers"</span> value=<span class="code-quote">"5"</span> /&gt;</span>
    <span class="code-tag"><span class="code-comment">&lt;!-- ... --&gt;</span></span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>

<p>Sometimes, it is very convenient to have a listener instance per concurrent polling thread. This allows a thread-safe instance variable to be constructed without worrying about concurrent access. In such a case, the <tt>prototype</tt> Spring scope can be used in conjunction with a <tt>listenerRef</tt> bean name injection. Here is an example:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"listener"</span> class=<span class="code-quote">"eg.SimpleListener"</span> scope=<span class="code-quote">"prototype"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:annotation-adapter id=<span class="code-quote">"adapterListener"</span> scope=<span class="code-quote">"prototype"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"listener"</span>/&gt;</span>
<span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span> concurrent-consumers=<span class="code-quote">"2"</span>&gt;</span>
    <span class="code-tag"><span class="code-comment">&lt;!-- ... --&gt;</span></span>
    <span class="code-tag">&lt;os-events:listener ref=<span class="code-quote">"adapterListener"</span> /&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"listener"</span> class=<span class="code-quote">"eg.SimpleListener"</span> scope=<span class="code-quote">"prototype"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"adapterListener"</span> class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span> scope=<span class="code-quote">"prototype"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"listener"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"concurrentConsumers"</span> value=<span class="code-quote">"2"</span> /&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListenerRef"</span> value=<span class="code-quote">"adapterListener"</span> /&gt;</span>
    <span class="code-tag"><span class="code-comment">&lt;!-- ... --&gt;</span></span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>


<h1><a name="PollingContainer-TemplateDefinition"></a>Template Definition</h1>

<p>When performing receive operations, a template is defined, creating a virtualized subset of data within the space that matches it. GigaSpaces supports templates based on the actual domain model (with <tt>null</tt> values denoting wildcards), which are shown in the examples. GigaSpaces allows the use of <a href="SQLQuery.html" title="SQLQuery">SQLQuery</a> in order to query the space, which can be easily used with the event container as the template. Here is an example of how it can be defined:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling
<span class="code-keyword">public</span> class SimpleListener {

    @EventTemplate
    SQLQuery&lt;Data&gt; unprocessedData() {
        SQLQuery&lt;Data&gt; template = <span class="code-keyword">new</span> SQLQuery&lt;Data&gt;(Data.class, <span class="code-quote">"processed = <span class="code-keyword">true</span>"</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>

    <span class="code-tag">&lt;os-core:sql-query where=<span class="code-quote">"processed = true"</span> class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>/&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
    
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"com.j_spaces.core.client.SQLQuery"</span>&gt;</span>
            <span class="code-tag">&lt;constructor index=<span class="code-quote">"0"</span> value=<span class="code-quote">"org.openspaces.example.data.common.Data"</span> /&gt;</span>
            <span class="code-tag">&lt;constructor index=<span class="code-quote">"0"</span> value=<span class="code-quote">"processed = true"</span> /&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>A polling container or notify container could have only one template. If you need multiple event handlers you will need to create another polling container or notify container. If you use multiple polling containers make sure the different templates does not overlap each other.</td></tr></table></div>

<h1><a name="PollingContainer-ReceiveOperationHandler"></a>Receive Operation Handler</h1>

<p>The polling receive container performs receive operations. The actual implementation of the receive operation is abstracted using the following interface:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">interface</span> ReceiveOperationHandler {

    /**
     * Performs the actual receive operation. Return values allowed are single object or an array of
     * objects.
     * 
     * @param template
     *            The template to use <span class="code-keyword">for</span> the receive operation.
     * @param gigaSpace
     *            The GigaSpace <span class="code-keyword">interface</span> to perform the receive operations with
     * @param receiveTimeout
     *            Receive timeout value
     * @<span class="code-keyword">return</span> The receive result. &lt;code&gt;<span class="code-keyword">null</span>&lt;/code&gt; indicating no receive occured. Single object
     *         or an array of objects indicating the receive operation result.
     * @<span class="code-keyword">throws</span> DataAccessException
     */
    <span class="code-object">Object</span> receive(<span class="code-object">Object</span> template, GigaSpace gigaSpace, <span class="code-object">long</span> receiveTimeout) <span class="code-keyword">throws</span> DataAccessException;
}</pre>
</div></div>

<p>OpenSpaces comes with several built-in receive operation-handler implementations:</p>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Receive Operation Handler</th>
<th class='confluenceTh'>Description</th>
</tr>
<tr>
<td class='confluenceTd'> <tt>SingleTakeReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>Performs a single blocking take operation with the receive timeout.</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>SingleReadReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>Performs a single blocking read operation with the receive timeout.</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>ExclusiveReadReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>Performs a single read operation under an exclusive read lock (similar to "select for update" in databases) with the receive timeout. Exclusive read lock mimics the take operation without actually taking the Entry from the space. <img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> This receive operation handler must be used within a transaction.</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>MultiTakeReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>First tries to perform takeMultiple (using a configured max Entries). If no values are returned, performs a blocking take operation with the receive timeout.</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>MultiReadReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>First tries to perform readMultiple (using a configured max Entries). If no values are returned, performs a blocking read operation with the receive timeout.</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>MultiExclusiveReadReceiveOperationHandler</tt> </td>
<td class='confluenceTd'>First tries to perform readMultiple (using a configured max Entries). If no values are returned, performs a blocking read operation with the receive timeout. Both read operations are performed under an exclusive read lock (similar to "select for update" in databases) which mimics a take operation without actually taking the Entry from the space. Note, this receive operation handler must be used within a transaction. </td>
</tr>
</tbody></table>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> When using the <tt>ExclusiveReadReceiveOperationHandler</tt> or even the <tt>SingleReadReceiveOperationHandler</tt>, it is important to remember that the actual event still remains in the space. If the data event is not taken from the space, or one of its properties changes in order <b>not</b> to match the container template, the same data event is read again.</p>

<p>Here is an example of how the receive operation handler can be configured with <tt>MultiTakeReceiveOperationHandler</tt>:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling
<span class="code-keyword">public</span> class SimpleListener {

    @ReceiveHandler
    ReceiveOperationHandler receiveHandler() {
        MultiTakeReceiveOperationHandler receiveHandler = <span class="code-keyword">new</span> MultiTakeReceiveOperationHandler();
        receiveHandler.setMaxEntries(100);
        <span class="code-keyword">return</span> receiveHandler;
    }

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:receive-operation-handler&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.receive.MultiTakeReceiveOperationHandler"</span> /&gt;</span>
    <span class="code-tag">&lt;/os-events:receive-operation-handler&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"receiveOperationHandler"</span>&gt;</span>
	    <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.receive.MultiTakeReceiveOperationHandler"</span> /&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>

<h2><a name="PollingContainer-NonBlockingReceiveHandler"></a>Non-Blocking Receive Handler</h2>

<p>When working with a partitioned cluster and configuring the polling container to work against the <a href="The GigaSpace Interface.html#TheGigaSpaceInterface-ClusteredFlag">whole cluster</a>, blocking operations are not allowed (when the routing index is not set in the template). The default receive operation handlers support performing the receive operation in a non-blocking manner, by sleeping between non-blocking operations. For example, the <tt>SingleTakeReceiveOperationHandler</tt> performs a non-blocking take operation against the space and then sleeps for a configurable amount of time. Here is an example of how it can be configured:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling
<span class="code-keyword">public</span> class SimpleListener {

    @ReceiveHandler
    ReceiveOperationHandler receiveHandler() {
        SingleTakeReceiveOperationHandler receiveHandler = <span class="code-keyword">new</span> SingleTakeReceiveOperationHandler();
        receiveHandler.setNonBlocking(<span class="code-keyword">true</span>);
        receiveHandler.setNonBlockingFactor(10);
        <span class="code-keyword">return</span> receiveHandler;
    }

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span> receive-timeout=<span class="code-quote">"10000"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:receive-operation-handler&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.receive.SingleTakeReceiveOperationHandler"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"nonBlocking"</span> value=<span class="code-quote">"true"</span> /&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"nonBlockingFactor"</span> value=<span class="code-quote">"10"</span> /&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-events:receive-operation-handler&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"receiveTimeout"</span> value=<span class="code-quote">"10000"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"receiveOperationHandler"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.receive.SingleTakeReceiveOperationHandler"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"nonBlocking"</span> value=<span class="code-quote">"true"</span> /&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"nonBlockingFactor"</span> value=<span class="code-quote">"10"</span> /&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>

<p>The above example uses a receive timeout of 10 seconds (10000 milliseconds). The <tt>SingleTakeReceiveOperationHandler</tt> is configured to be non-blocking with a non-blocking factor of 10. This means that the receive handler performs 10 non-blocking takes within 10 seconds and sleeps the rest of the time (~1 second each time).</p>

<h1><a name="PollingContainer-BatchOperationsandpassArrayAsIs"></a>Batch Operations and passArrayAsIs</h1>
<p>Processing data in batches may improve the processing throughput performance. Instead of consuming object one at a time from the space and processing it, you may consume a batch with multiple objects and process these in one transaction. This may improve the overall throughput rate, but may impact the latency of the individual object processing time.</p>

<p>See below a simple benchmark results comparing the different options:<br/>
<img src="download/attachments/48235229/poll_bench.jpg" align="absmiddle" border="0"/><br/>
See full benchmark description on the <a href="http://blog.gigaspaces.com/2008/10/03/how-to-implement-my-processor-the-polling-container-benchmark">How to Implement my Processor? - The Polling Container Benchmark</a> GigaSpaces blog site.</p>

<p>You may use batching via the <tt>MultiTakeReceiveOperationHandler</tt>. The <tt>MultiTakeReceiveOperationHandler.setMaxEntries(integer)</tt> allows you to set the maximum amount of objects to be consumed with each polling event. If the space does not have sufficient number of matching objects during the polling point in time, the event listener method will be called with the existing number of matching objects (will be smaller than the <tt>MaxEntries</tt> value. There will be no delay in such a case and the polling container will not wait until there will be exact amount of matching objects to consume as specified via the <tt>MaxEntries</tt>.</p>

<p>Certain receive operation handlers might return an array as a result of the receive operation. A prime example is the <tt>MultiTakeReceiveOperationHandler</tt>, which might return an array as a result of a <tt>takeMultiple</tt> operation called by the polling container. By default, the polling container serializes the execution of the array into invocation of the event listener method for each element in the array. If you want the event to operate on the whole array (receive the array as a parameter into the event listener method), the <tt>passArrayAsIs</tt> annotation should be set to <b>true</b>.</p>

<p>Here is an example for batch processing using the <tt>passArrayAsIs</tt> - with this example the polling container will consume a batch of objects using <tt>takeMultiple</tt>, modify these and write these back into the space in one operation using <tt>writeMultiple</tt>:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven 
@Polling(passArrayAsIs = <span class="code-keyword">true</span>)
<span class="code-keyword">public</span> class SimpleBatchListener {

    @ReceiveHandler
    ReceiveOperationHandler receiveHandler() {
        MultiTakeReceiveOperationHandler receiveHandler = <span class="code-keyword">new</span> MultiTakeReceiveOperationHandler();
        receiveHandler.setMaxEntries(100);
        <span class="code-keyword">return</span> receiveHandler;
    }

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data[] eventListener(Data events[]) {
        <span class="code-comment">//process Data within a loop
</span>	<span class="code-keyword">for</span> (<span class="code-object">int</span> i = 0; i &lt; events.length; i++) {
		events[i].setProcessed(<span class="code-keyword">true</span>);
	}
<span class="code-keyword">return</span> events;
    }
}</pre>
</div></div>

<h1><a name="PollingContainer-TransactionSupport"></a>Transaction Support</h1>

<p>Both the receive operation and the actual event action can be configured to be performed under a transaction. Transaction support is required when, for example, an exception occurs in the event listener, and the receive operation needs to be to rolled back (and the actual data event is returned to the space). Adding transaction support is very simple in the polling container, and can be done by injecting a transaction manager into it. For example:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag"><span class="code-comment">&lt;!-- Enable scan for OpenSpaces and Spring components --&gt;</span></span>
<span class="code-tag">&lt;context:component-scan base-package=<span class="code-quote">"com.mycompany"</span>/&gt;</span>

<span class="code-tag"><span class="code-comment">&lt;!-- Enable support for @Polling annotation --&gt;</span></span>
<span class="code-tag">&lt;os-events:annotation-support /&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:local-tx-manager id=<span class="code-quote">"transactionManager"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span> tx-manager=<span class="code-quote">"transactionManager"</span>/&gt;</span></pre>
</div></div> 

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling @TransactionalEvent
<span class="code-keyword">public</span> class SimpleListener {

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:local-tx-manager id=<span class="code-quote">"transactionManager"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span> tx-manager=<span class="code-quote">"transactionManager"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:tx-support tx-manager=<span class="code-quote">"transactionManager"</span>/&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"transactionManager"</span> class=<span class="code-quote">"org.openspaces.core.transaction.manager.LocalJiniTransactionManager"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"transactionManager"</span> ref=<span class="code-quote">"transactionManager"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"transactionManager"</span> ref=<span class="code-quote">"transactionManager"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-Code"></a>Code</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">GigaSpace gigaSpace = ...<span class="code-comment">//create a GigaSpace instance
</span>
<span class="code-comment">//creating a local transaction manager. For more details please refer to the [Transaction Management] section
</span>PlatformTransactionManager ptm = <span class="code-keyword">new</span> LocalJiniTxManagerConfigurer(gigaSpace.getSpace()).transactionManager();

<span class="code-comment">//creating a listener 
</span>SimpleListener listener = <span class="code-keyword">new</span> SimpleListener(); 

<span class="code-comment">//creating a polling container which will automatically start receiving event from the space 
</span>SimplePollingEventListenerContainer pollingContainer configurer = <span class="code-keyword">new</span> SimplePollingContainerConfigurer(gigaSpace)
                .template(listener.getTemplate()).eventListenerAnnotation(listener)
                .transactionManager(ptm)
                .receiveTimeout(1000)
                .pollingContainer();</pre>
</div></div>
</div></div>

<p>When using transactions with polling container a special care should be taken with timeout values. Transactions started by the polling container can have a timeout value associated with them (if not set will default to the default timeout value of the transaction manager, which is 60 Sec). If setting a specific timeout value, make sure the timeout value is higher than the timeout value for blocking operations and includes the expected execution time of the associated listener.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> Note the timeout value is in seconds as per Spring spec for TransactionDefinition.</p>

<p>Here is an example how timeout value (and transaction isolation) can be set with polling container:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag"><span class="code-comment">&lt;!-- Enable scan for OpenSpaces and Spring components --&gt;</span></span>
<span class="code-tag">&lt;context:component-scan base-package=<span class="code-quote">"com.mycompany"</span>/&gt;</span>

<span class="code-tag"><span class="code-comment">&lt;!-- Enable support for @Polling annotation --&gt;</span></span>
<span class="code-tag">&lt;os-events:annotation-support /&gt;</span>

<span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:local-tx-manager id=<span class="code-quote">"transactionManager"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span> tx-manager=<span class="code-quote">"transactionManager"</span>/&gt;</span></pre>
</div></div> 

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling @TransactionalEvent(isolation = Isolation.READ_COMMITTED, timeout = 1000)
<span class="code-keyword">public</span> class SimpleListener {

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:local-tx-manager id=<span class="code-quote">"transactionManager"</span> giga-space=<span class="code-quote">"gigaSpace"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:tx-support tx-manager=<span class="code-quote">"transactionManager"</span> tx-timeout=<span class="code-quote">"1000"</span> tx-isolation=<span class="code-quote">"READ_COMMITTED"</span> /&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"transactionManager"</span> class=<span class="code-quote">"org.openspaces.core.transaction.manager.LocalJiniTransactionManager"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"transactionManager"</span> ref=<span class="code-quote">"transactionManager"</span> /&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"transactionTimeout"</span> value=<span class="code-quote">"1000"</span> /&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"transactionIsolationLevelName"</span> value=<span class="code-quote">"READ_COMMITTED"</span> /&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>


<h1><a name="PollingContainer-TriggerReceiveOperation"></a>Trigger Receive Operation</h1>

<p>When configuring the polling event container to perform its receive operation and event actions under a transaction, a transaction is started and rolled back for each unsuccessful receive operation, which results in a higher load on the space. The polling event container allows pluggable logic to be used in order to decide if the actual receive operation should be performed or not. This logic, called the trigger receive operation, is performed outside the receive transaction boundaries. The following interface is provided for custom implementation of this logic:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">interface</span> TriggerOperationHandler {

    /**
     * Allows to perform a trigger receive operation which control <span class="code-keyword">if</span> the active receive operation
     * will be performed in a polling event container. This feature is mainly used when having
     * polling event operations with transactions where the trigger receive operation is performed
     * outside of a transaction thus reducing the creation of transactions did not perform the
     * actual receive operation.
     * 
     * &lt;p&gt;
     * If <span class="code-keyword">this</span> operation returns a non &lt;code&gt;<span class="code-keyword">null</span>&lt;/code&gt; value, it means that the receive
     * operation should take place. If it returns a &lt;code&gt;<span class="code-keyword">null</span>&lt;/code&gt; value, no receive operation
     * will be attempted.
     * 
     * @param template
     *            The template to use <span class="code-keyword">for</span> the receive operation.
     * @param gigaSpace
     *            The GigaSpace <span class="code-keyword">interface</span> to perform the receive operations with
     * @param receiveTimeout
     *            Receive timeout value
     * @<span class="code-keyword">throws</span> DataAccessException
     * 
     */
    <span class="code-object">Object</span> triggerReceive(<span class="code-object">Object</span> template, GigaSpace gigaSpace, <span class="code-object">long</span> receiveTimeout) <span class="code-keyword">throws</span> DataAccessException;

    /**
     * Controls <span class="code-keyword">if</span> the object returned from
     * {@link #triggerReceive(<span class="code-object">Object</span>,org.openspaces.core.GigaSpace,<span class="code-object">long</span>)} will be used as the
     * template <span class="code-keyword">for</span> the receive operation by returning &lt;code&gt;<span class="code-keyword">true</span>&lt;/code&gt;. If &lt;code&gt;<span class="code-keyword">false</span>&lt;/code&gt;
     * is returned, the actual template configured in the polling event container will be used.
     */
    <span class="code-object">boolean</span> isUseTriggerAsTemplate();
}</pre>
</div></div>

<p>OpenSpaces comes with a built-in implementation of this interface, called <tt>ReadTriggerOperationHandler</tt>. It performs a single blocking read operation (using the provided receive timeout), thus "peeking" into the space for relevant event data. If the read operation returns a value, this means that there is higher probability that the receive operation will succeed, and the transaction won't be started without a purpose. Here is how it can be configured:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="PollingContainer-Annotation"></a>Annotation</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">@EventDriven @Polling @TransactionalEvent
<span class="code-keyword">public</span> class SimpleListener {

    @TriggerHandler
    TriggerOperationHandler receiveHandler() {
        ReadTriggerOperationHandler triggerHandler = <span class="code-keyword">new</span> ReadTriggerOperationHandler();
        <span class="code-keyword">return</span> triggerHandler;
    }

    @EventTemplate
    Data unprocessedData() {
        Data template = <span class="code-keyword">new</span> Data();
        template.setProcessed(<span class="code-keyword">false</span>);
        <span class="code-keyword">return</span> template;
    }
    
    @SpaceDataEvent
    <span class="code-keyword">public</span> Data eventListener(Data event) {
        <span class="code-comment">//process Data here
</span>    }
}</pre>
</div></div>


<h5><a name="PollingContainer-Namespace"></a>Namespace</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./space"</span> /&gt;</span>

<span class="code-tag">&lt;os-core:giga-space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span>

<span class="code-tag">&lt;os-core:local-tx-manager id=<span class="code-quote">"transactionManager"</span> giga-space=<span class="code-quote">"gigaSpace"</span>/&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;os-events:polling-container id=<span class="code-quote">"eventContainer"</span> giga-space=<span class="code-quote">"gigaSpace"</span>&gt;</span>
    <span class="code-tag">&lt;os-events:tx-support tx-manager=<span class="code-quote">"transactionManager"</span>/&gt;</span>
    
    <span class="code-tag">&lt;os-events:trigger-operation-handler&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.trigger.ReadTriggerOperationHandler"</span> /&gt;</span>
    <span class="code-tag">&lt;/os-events:trigger-operation-handler&gt;</span>
    
    <span class="code-tag">&lt;os-core:template&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/os-core:template&gt;</span>
    
    <span class="code-tag">&lt;os-events:listener&gt;</span>
        <span class="code-tag">&lt;os-events:annotation-adapter&gt;</span>
            <span class="code-tag">&lt;os-events:delegate ref=<span class="code-quote">"simpleListener"</span>/&gt;</span>
        <span class="code-tag">&lt;/os-events:annotation-adapter&gt;</span>
    <span class="code-tag">&lt;/os-events:listener&gt;</span>
<span class="code-tag">&lt;/os-events:polling-container&gt;</span></pre>
</div></div> 


<h5><a name="PollingContainer-PlainXML"></a>Plain XML</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openspaces.core.space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"/./space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openspaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"transactionManager"</span> class=<span class="code-quote">"org.openspaces.core.transaction.manager.LocalJiniTransactionManager"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"simpleListener"</span> class=<span class="code-quote">"SimpleListener"</span> /&gt;</span>

<span class="code-tag">&lt;bean id=<span class="code-quote">"eventContainer"</span> class=<span class="code-quote">"org.openspaces.events.polling.SimplePollingEventListenerContainer"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"transactionManager"</span> ref=<span class="code-quote">"transactionManager"</span> /&gt;</span>

    <span class="code-tag">&lt;property name=<span class="code-quote">"gigaSpace"</span> ref=<span class="code-quote">"gigaSpace"</span> /&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"triggerOperationHandler"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.polling.trigger.ReadTriggerOperationHandler"</span> /&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"template"</span>&gt;</span>
        <span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.example.data.common.Data"</span>&gt;</span>
            <span class="code-tag">&lt;property name=<span class="code-quote">"processed"</span> value=<span class="code-quote">"false"</span>/&gt;</span>
        <span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
    
    <span class="code-tag">&lt;property name=<span class="code-quote">"eventListener"</span>&gt;</span>
    	<span class="code-tag">&lt;bean class=<span class="code-quote">"org.openspaces.events.adapter.AnnotationEventListenerAdapter"</span>&gt;</span>
    	    <span class="code-tag">&lt;property name=<span class="code-quote">"delegate"</span> ref=<span class="code-quote">"simpleListener"</span> /&gt;</span>
    	<span class="code-tag">&lt;/bean&gt;</span>
    <span class="code-tag">&lt;/property&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div>
</div></div>

<h1><a name="PollingContainer-DefaultValuesofPollingContainerConfigurationParameters"></a>Default Values of Polling Container Configuration Parameters </h1>

<p>The default values for all of the polling container configuration parameters such as <tt>concurrent-consumers, active-when-primary, receive-timeout</tt> and others can be found in the JavaDoc (and sources) of the class <tt><a href="http://www.gigaspaces.com/docs/JavaDoc7.0/org/openspaces/events/polling/SimplePollingEventListenerContainer.html">org.openspaces.events.polling.SimplePollingEventListenerContainer</a></tt> and its super class, namely <tt><a href="http://www.gigaspaces.com/docs/JavaDoc7.0/org/openspaces/events/polling/AbstractPollingEventListenerContainer.html">org.openspaces.events.polling.AbstractPollingEventListenerContainer</a></tt>. <br/>
For example, <tt>concurrent-consumers</tt> default value is documented in the method <tt>SimplePollingEventListenerContainer.setConcurrentConsumers(int)</tt></p>

<h1><a name="PollingContainer-Schema"></a>Schema</h1>
<p>The Polling Container schema and complete configuration options are described below:</p>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><a href='http://www.gigaspaces.com/wiki/download/attachments/48235229/polling_container_schema.jpg' target='polling_container_schema.jpg' onClick='window.open("http://www.gigaspaces.com/wiki/download/attachments/48235229/polling_container_schema.jpg", "polling_container_schema.jpg", "height=607,width=1480,menubar=no,status=no,toolbar=no"); return false;'><img src="download/thumbnails/48235229/polling_container_schema.jpg" align="absmiddle" border="0"/></a></p></div>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
