<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Deploying and Interacting with the Space</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Deploying and Interacting with the Space</h1>
</div>
<br>

<script type='text/javascript'>//<![CDATA[
function debug() { }
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/browser.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/behaviour.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/memory.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/cloak.js'>//<![CDATA[
// ]]></script><script type='text/javascript'>//<![CDATA[
Cloak.closeHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_down_10.gif\'/>";
Cloak.openHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_right_10.gif\'/>";
Cloak.toggleZone = true;
Cloak.memoryDuration = 0;
Cloak.memoryPrefix = "contentId:53903756";
Cloak.memoryPath = "/wiki/";
// ]]></script><style type='text/css'>
.cloakToggle { /* Definition for state toggling image */
cursor:hand;
cursor:pointer;
}
</style><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/transitions.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/deck.js'>//<![CDATA[
// ]]></script><link rel='stylesheet' type='text/css'  href='/wiki/styles/main-action.css?pluginCompleteKey=net.customware.confluence.plugin.composition:composition-setup&stylesheetName=deck&spaceKey=XAP8'/><script type='text/javascript'>//<![CDATA[
Deck.memoryDuration = 0;
Deck.memoryPrefix = "contentId:53903756";
Deck.memoryPath = "/wiki/";
// ]]></script>


<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Overview of GigaSpaces in-memory data grid - how to create a data grid, connect to it, and interact with it. </p>
</div>


<h1><a name="DeployingandInteractingwiththeSpace-Overview"></a>Overview</h1>
<p>This section covers the main APIs of GigaSpaces XAP. It explains how to: </p>
<ul>
	<li>Instantiate a data grid (a Space) programmatically, via Spring or by <a href="Deploying onto the Service Grid.html" title="Deploying onto the Service Grid">deploying onto the service grid</a>.</li>
	<li>Connect to the Space to gain access to it using the core GigaSpaces API, the Map API, or other APIs.</li>
	<li>Read data from the Space and write data to it, using the core GigaSpaces API.</li>
</ul>


<h1><a name="DeployingandInteractingwiththeSpace-ClasspathSettingsforDevelopmentandRuntime"></a>Classpath Settings for Development and Runtime </h1>
<p>To compile and run code that interacts with the Space from within the IDE, you should include all the JARs under the <tt>&lt;GigaSapces root&gt;/lib/required</tt> directory in your build path (i.e. a total of thirteen JARs - <tt>com.springsource.org.aopalliance-1.0.0.jar, commons-logging.jar, gs-openspaces.jar, gs-runtime.jar, org.springframework.aop-3.0.3.RELEASE.jar, org.springframework.asm-3.0.3.RELEASE.jar, org.springframework.aspects-3.0.3.RELEASE.jar, org.springframework.beans-3.0.3.RELEASE.jar, org.springframework.context-3.0.3.RELEASE.jar, org.springframework.context.support-3.0.3.RELEASE.jar, org.springframework.core-3.0.3.RELEASE.jar, org.springframework.expression-3.0.3.RELEASE.jar, org.springframework.transaction-3.0.3.RELEASE.jar</tt>, for XAP 8.0.0-m6).</p>

<p>If you run your Space client as a <a href="The Processing Unit Structure and Configuration.html" title="The Processing Unit Structure and Configuration">Processing Unit</a> within the GigaSpaces <a href="The Runtime Environment.html" title="The Runtime Environment">runtime environment</a>, GigaSpaces classes and interfaces are part of the JVM's classpath by default. If you run in standalone mode (from within your IDE or non-GigaSpaces JVM), you should include the above thirteen JARs in your classpath. </p>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>If you're running Java 6, you can use a shorthand to include directories of jars: <tt>java -classpath /installation/lib/required/*.jar mypackage.myClass</tt>, for example.</td></tr></table></div>

<h1><a name="DeployingandInteractingwiththeSpace-SpaceClusterSchemas"></a>Space Cluster Schemas </h1>
<p>A Space is identified by its name, and is comprised of one or more Space instances, which form the Space cluster. The Space instances interact with one another, based on the <a href="Space Topologies.html" title="Space Topologies">Space topology</a> defined for the Space. The topology is defined using a cluster schema, and the following schemas are provided out-of-the-box: </p>
<ul>
	<li><tt>sync_replicated</tt> - defines a replicated cluster with synchronous replication between Space instances.
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/sync_rep_space.jpg" align="absmiddle" border="0"/></p></div></li>
	<li><tt>async_replicated</tt> - defines a replicated cluster with asynchronous replication between Space instances.
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/async_rep_space.jpg" align="absmiddle" border="0"/></p></div></li>
	<li><tt>partitioned-sync2backup</tt> - defines a partitioned cluster with zero or more backups for each partition. Replication between primaries and backups is synchronous.<br/>
Examples:<br/>
A partitioned cluster with zero backups:
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/part_space.jpg" align="absmiddle" border="0"/></p></div>
<p>A partitioned cluster with one primary and one backup for each partition:</p>
<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/part_backup_space.jpg" align="absmiddle" border="0"/></p></div></li>
</ul>


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>For details about scaling a running space cluster <b>in runtime</b> see the <a href="http://www.gigaspaces.com/wiki/display/SBP/Moving+into+Production+Checklist#MovingintoProductionChecklist-RebalancingDynamicRepartitioning">Dynamic Partitioning</a> section. </td></tr></table></div>

<p>The Space cluster is typically accessed from a remote JVM. Alternatively, applications that are collocated on the same JVM with a Space instance can access that instance locally without being exposed to the other instances (this is useful for implementing <a href="A Typical SBA Application.html" title="A Typical SBA Application">SBA applications</a>). </p>

<h1><a name="DeployingandInteractingwiththeSpace-InstantiatingaSpace"></a>Instantiating a Space</h1>
<p>The Space can be instantiated in a number of ways:</p>
<div class="error"><span class="error">Error formatting macro: toc-zone: java.lang.NullPointerException</span> 

<p>The first way, you deploy a Space onto the GigaSpaces Service Grid infrastructure (using the management GUI, the <a href="deploy - GigaSpaces CLI.html" title="deploy - GigaSpaces CLI">CLI</a> or the <a href="Administration and Monitoring API.html" title="Administration and Monitoring API">administration and monitoring API</a>).<br/>
In the second way of instantiating a space, you create a processing unit that contains an embedded Space, and deploy it onto the GigaSpaces Service Grid infrastructure (using the management GUI, the <a href="deploy - GigaSpaces CLI.html" title="deploy - GigaSpaces CLI">CLI</a> or the <a href="Administration and Monitoring API.html" title="Administration and Monitoring API">administration and monitoring API</a>).  <br/>
The last two ways of instantiating a space are from within your application's code using Spring, or from within your application's code. In both these cases, you have to manually start each Space instance.</p>


<h3><a name="DeployingandInteractingwiththeSpace-DeployingaSpaceontotheServiceGridInfrastructure"></a>Deploying a Space onto the Service Grid Infrastructure </h3>
<p>The service grid infrastructure is composed of one or more <a href="The GigaSpaces Container.html" title="The GigaSpaces Container">GigaSpaces Containers</a> (GSCs) and at least one <a href="The GigaSpaces Manager.html" title="The GigaSpaces Manager">GigaSpaces Manager</a> (GSM). When deploying onto the service grid, the deployment tool you use connects to the GSM and instructs it to provision Space instances to the running GSCs, based on the deployment details (Space topology, number of instances, etc.). <br/>
After starting the appropriate amount of GSCs and GSMs in your cluster (note that as of version 7.0 you can use <a href="The GigaSpaces Agent.html" title="The GigaSpaces Agent">The GigaSpaces Agent</a> for this), there are a number of tools that can be used to deploy a Space onto the service grid:</p>
<ul>
	<li><a href="#DeployingandInteractingwiththeSpace-app">Using the Management UI</a></li>
	<li><a href="#DeployingandInteractingwiththeSpace-cli">Using the CLI</a></li>
	<li><a href="#DeployingandInteractingwiththeSpace-api">Using the Administration API</a></li>
</ul>


<p><a name="DeployingandInteractingwiththeSpace-man"></a></p>
<h5><a name="DeployingandInteractingwiththeSpace-DeployingaSpaceUsingtheManagementUI"></a>Deploying a Space Using the Management UI </h5>
<p>1. Start the GigaSpaces Agent by running <tt>&lt;GigaSpaces root&gt;/bin/gs-agent.sh(bat)</tt> on the machines on which you would like to deploy the clustered space. <br/>
2. Start the management UI by running <tt>&lt;GigaSpaces root&gt;/bin/gs-ui.sh(bat)</tt>. <br/>
3. Click  the <img src="download/attachments/53903756/deploy-dg.jpg" align="absmiddle" border="0"/> <b>Deploy In-Memory Data Grid</b> button (top left, second button). <br/>
4. In the dialog box that opens, fill in the data grid name, number of instances/backups, the cluster schema (which defines the Space topology), and any other relevant details. Four examples are shown below. </p>

<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="DeployingandInteractingwiththeSpace-SyncReplicated"></a>Sync-Replicated</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/deploy_wiz_sync_rep.jpg" align="absmiddle" border="0"/></p></div>


<h5><a name="DeployingandInteractingwiththeSpace-ASyncReplicated"></a>A-Sync-Replicated</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/deploy_wiz_async_rep.jpg" align="absmiddle" border="0"/></p></div>


<h5><a name="DeployingandInteractingwiththeSpace-Partitionedwithoutbackups"></a>Partitioned without backups</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/deploy_wiz_part.jpg" align="absmiddle" border="0"/></p></div>


<h5><a name="DeployingandInteractingwiththeSpace-Partitionedwithonebackup"></a>Partitioned with one backup</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="indent20 inline" style="margin-left: 20px;"><style type="text/css">div.inline p:first-child { display: inline; }</style><p><img src="download/attachments/48235229/deploy_wiz_part_back.jpg" align="absmiddle" border="0"/></p></div>
</div></div>
<p>5. Click <b>Deploy</b>. </p>

<p><a name="DeployingandInteractingwiththeSpace-cli"></a></p>
<h5><a name="DeployingandInteractingwiththeSpace-DeployingaSpaceUsingtheCLI"></a>Deploying a Space Using the CLI</h5>
<p>1. Start the GigaSpaces Agent by running <tt>&lt;GigaSpaces root&gt;/bin/gs-agent.sh(bat)</tt> on the machines on which you would like to deploy the clustered space. <br/>
2. Use the the GigaSpaces CLI by starting <tt>&lt;GigaSpaces root&gt;/bin/gs.sh(bat)</tt>. </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">gs deploy-space -cluster [schema=&lt;cluster schema&gt;] total_members=&lt;number of instances&gt;[,&lt;number of backups&gt;] &lt;Space name&gt;</pre>
</div></div>

<p>Examples:<br/>
Sync-replicated cluster with 2 nodes:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">gs deploy-space -cluster schema=sync_replicated total_members=2 mySpace</pre>
</div></div>

<p>A-sync-replicated cluster with 2 nodes:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">gs deploy-space -cluster schema=async_replicated total_members=2 mySpace</pre>
</div></div>

<p>Partitioned cluster with 2 nodes and a backup for each node:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">gs deploy-space -cluster schema=partitioned-sync2backup total_members=2,1 mySpace</pre>
</div></div>

<p>To see the full list of options available with this command, refer to <a href="deploy-space GigaSpaces CLI.html" title="deploy-space GigaSpaces CLI">this page</a>. </p>

<p><a name="DeployingandInteractingwiththeSpace-api"></a></p>
<h5><a name="DeployingandInteractingwiththeSpace-DeployingaSpaceUsingtheAdministrationAPI"></a>Deploying a Space Using the Administration API</h5>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Admin admin = <span class="code-keyword">new</span> AdminFactory().addGroup(<span class="code-quote">"myGroup"</span>).createAdmin();
ProcessingUnit processingUnit = admin.getGridServiceManagers().
        deploy(<span class="code-keyword">new</span> SpaceDeployment(<span class="code-quote">"mySpace"</span>).numberOfInstances(2).numberOfBackups(1));
<span class="code-comment">//wait <span class="code-keyword">for</span> the instances to start 
</span>Space Space = processingUnit.waitForSpace();
Space.waitFor(4);</pre>
</div></div>		
<p>Refer to the <a href="Administration and Monitoring API.html" title="Administration and Monitoring API">admin API documentation</a> for more details. </p>


<h3><a name="DeployingandInteractingwiththeSpace-CreatingandDeployingaProcessingUnitontotheServiceGridInfrastructure"></a>Creating and Deploying a Processing Unit onto the Service Grid Infrastructure </h3>
<p>By using <a href="The Processing Unit Structure and Configuration.html" title="The Processing Unit Structure and Configuration">processing units</a>, you can deploy full-blown applications onto the service grid, and leverage on the <a href="Messaging and Events.html" title="Messaging and Events">Space's messaging</a> and code execution capabilities, such as <a href="Space Based Remoting.html" title="Space Based Remoting">remoting</a> and <a href="Task Execution over the Space.html" title="Task Execution over the Space">task execution</a>. This allows you to execute the business logic close to the Space instance for the best possible performance.</p>

<p>A processing unit can define an embedded Space in the processing unit's <tt><a href="Configuring Processing Unit Elements.html" title="Configuring Processing Unit Elements">pu.xml</a></tt> file. The <tt>pu.xml</tt> file is, in effect a <a href="http://www.springframework.org">Spring</a> XML configuration file, and you simply define the Space using GigaSpaces namespace extensions, or using plain Spring format. Here is an example: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./mySpace"</span>/&gt;</span></pre>
</div></div>

<p>This defines an embedded Space within the processing unit. The fact that the Space is embedded is determined by the <tt>url</tt> property. As you can see below, a URL that starts with the <tt>jini://</tt> prefix, indicates that a connection to a remote Space is created, not an embedded Space. <br/>
Note that the cluster schema and number of instances are defined inside the processing unit's <a href="Configuring the Processing Unit SLA.html" title="Configuring the Processing Unit SLA">SLA definitions</a> (typically within the <tt>sla.xml</tt> file), to allow for seamless transition between your local development environment and the actual runtime environment. Here is an example of an SLA definition within the <tt>sla.xml</tt> file:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-sla:sla cluster-schema=<span class="code-quote">"partitioned-sync2backup"</span> number-of-instances=<span class="code-quote">"2"</span> number-of-backups=<span class="code-quote">"1"</span>/&gt;</span></pre>
</div></div>

<p>Refer to <a href="The Space Component.html" title="The Space Component">this page</a> for more details on how to configure the Space component, and to <a href="Configuring the Processing Unit SLA.html" title="Configuring the Processing Unit SLA">this page</a> for more details about the SLA definitions. <br/>
Once packaged, the processing unit can be deployed onto the service grid using one of the deployment tools (UI, CLI, admin API). <br/>
Refer to <a href="Deploying onto the Service Grid.html" title="Deploying onto the Service Grid">this page</a> for more details on how to deploy your processing unit onto the service grid. </p>

<h3><a name="DeployingandInteractingwiththeSpace-CreatingtheSpaceviaSpring"></a>Creating the Space via Spring </h3>
<p>If you would like to create a Space within your own Spring application, and do not wish to deploy it as a processing unit onto the GigaSpaces service grid, you can create an embedded Space instance within the application's JVM much the same way you would do in a regular processing unit configuration. The main difference with this approach is that when deploying on to the service grid, the GSM automatically starts the right amount of Space instances for you, and assigns the instance ID to each of the instances. <br/>
When creating the Space instance in your own application, you have to provide the instance ID on your own, as described in the <a href="Space URL.html" title="Space URL">Space URL</a> section. Therefore this option is not recommended for large Space clusters.  </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"/./mySpace?total_members=2&amp;id=1"</span>/&gt;</span></pre>
</div></div>

<h3><a name="DeployingandInteractingwiththeSpace-CreatingtheSpaceProgrammatically"></a>Creating the Space Programmatically</h3>
<p>The last option is to create the Space Programmatically from within a plain Java application. Note that this option has the same limitation as creating the Space in your standalone Spring application, namely you have to start each of the instances separately and provide the instance ID to each of the started Space instances. Here is an example of starting the first instance of a sync-replicated Space with 10 instances: </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">ClusterInfo clusterInfo = <span class="code-keyword">new</span> ClusterInfo(<span class="code-quote">"sync-replicated"</span>, 1, <span class="code-keyword">null</span>, 10, <span class="code-keyword">null</span>);
IJSpace space = <span class="code-keyword">new</span> UrlSpaceConfigurer(<span class="code-quote">"/./mySpace"</span>).clusterInfo(clusterInfo).space();</pre>
</div></div>
<p>Refer to <a href="The Space Component.html" title="The Space Component">this page</a> for more details on how to configure the Space component programmatically (click the <b>Code</b> tabs in all of the examples). </p></div>

<h1><a name="DeployingandInteractingwiththeSpace-AccessingtheSpace"></a>Accessing the Space </h1>
<p>The handle to the Space is represented by the low level <tt>IJSpace</tt> interface. When creating the Space in one of the above ways (programmatically, via Spring or within a processing unit), you get a handle to the local Space instance within your JVM. <br/>
If you are connecting to the Space from a remote JVM, you can use all of the above methods, with the exception that <a href="Space URL.html" title="Space URL">the Space URL</a> you should use is a remote URL (using the <tt>jini://</tt> discovery protocol), and you don't have to specify the clustering topology or the instance ID (since your code in that case does not create the Space, it simply connects to an already running Space). <br/>
Here is an example of how you would do this programmatically, or via Spring configuration (from within a processing unit or a plain Spring application): </p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="DeployingandInteractingwiththeSpace-SpringConfiguration%28NameSpace%29"></a>Spring Configuration (NameSpace)</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"jini://*/*/mySpace"</span> /&gt;</span></pre>
</div></div> 


<h5><a name="DeployingandInteractingwiththeSpace-SpringConfiguration%28Plain%29"></a>Spring Configuration (Plain)</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openSpaces.core.Space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"jini:/*/*/mySpace"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div> 


<h5><a name="DeployingandInteractingwiththeSpace-JavaCode"></a>Java Code</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">IJSpace space = <span class="code-keyword">new</span> UrlSpaceConfigurer(<span class="code-quote">"jini:<span class="code-comment">//*/*/mySpace"</span>).space();</span></pre>
</div></div>
</div></div>

<p>Although you can access the Space directly via the <tt>IJSpace</tt> interface (which was the mainstream approach until version 6.0), it is much more recommended to access the Space via one of the higher level APIs, namely the <tt>org.openSpaces.core.GigaSpace</tt> interface, the <a href="The GigaMap Interface.html" title="The GigaMap Interface">Map API</a>, or the <a href="JDBC Driver.html" title="JDBC Driver">JDBC API</a>. <br/>
All of these APIs are built on top of the lower level <tt>IJSpace</tt> interface. With the <tt>GigaSpace</tt> and <tt>GigaMap</tt> interfaces, you simply create an <tt>IJSpace</tt> instance as described above (embedded or remote) and then wrap it with one of the higher level constructs, namely <tt>GigaSpace</tt>, <tt>GigaMap</tt> or JDBC API (all of this can be done either programmatically or via Spring). With the JDBC API, you use the GigaSpaces JDBC driver directly.  </p>

<p>The most recommended API is the <tt>GigaSpaces</tt> interface. It is the closest to the older <tt>IJSpace</tt> interface, but is different since it supports Java 5 generics, <a href="Transaction Management.html" title="Transaction Management">declarative Spring transactions</a> and <a href="Task Execution over the Space.html" title="Task Execution over the Space">task execution over the Space</a>. <br/>
Historically, both the <tt>GigaSpace</tt> and <tt>IJSpace</tt> interfaces are based on the <a href="http://www.jini.org/wiki/JavaSpaces_Specification">JavaSpaces specification</a> and the <a href="http://en.wikipedia.org/wiki/Tuple_Space">tuple Space</a> model. </p>

<p>They support 4 basic "verbs" of this model, namely read, write, take and notify (see <a href="#DeployingandInteractingwiththeSpace-verbs">below</a> for more details). <br/>
The <tt>org.openSpaces.core.GigaSpace</tt> interface differs from the classic JavaSpaces model in a number of ways:  </p>
<ul>
	<li>It works with POJOs rather than <tt>Entry</tt> classes, and is far less intrusive to the cached objects</li>
	<li>It supports Java 5 Generics</li>
	<li>It supports batch operations</li>
	<li>It supports asynchronous operations</li>
	<li>It supports <a href="Task Execution over the Space.html" title="Task Execution over the Space">task execution over the Space</a></li>
	<li>It is Spring-enabled, which means it automatically joins Spring-managed transactions (declarative or programmatic) and uses the Spring <tt>DataAccessException</tt> as a base class for all the exceptions that are thrown when something goes wrong.</li>
	<li>It does not implement the <tt>net.jini.Space.JavaSpace</tt> interface, and therefore does not enforce any of its restrictions.</li>
</ul>


<h1><a name="DeployingandInteractingwiththeSpace-InteractingwiththeSpaceUsingthe%7B%7BGigaSpace%7D%7DInterface"></a>Interacting with the Space Using the <tt>GigaSpace</tt> Interface </h1>
<p>The rest of this page describes the <tt>GigaSpace</tt> interface, and how to perform basic data access operations with which to access the Space.</p>
<div class="error"><span class="error">Error formatting macro: toc-zone: java.lang.NullPointerException</span> 

<p>If you are interested in the Map API, refer to the following pages: </p>
<ul>
	<li><a href="The Map Component.html" title="The Map Component">The Map Component</a></li>
	<li><a href="The GigaMap Interface.html" title="The GigaMap Interface">The GigaMap Interface</a></li>
</ul>


<p>For details about the JDBC API, refer to <a href="JDBC Driver.html" title="JDBC Driver">this</a> page. <br/>
However, it is recommended that you familiarize yourself with the <tt>GigaSpace</tt> interface before moving on to the other APIs. </p>

<p><a name="DeployingandInteractingwiththeSpace-verbs"></a></p>
<h3><a name="DeployingandInteractingwiththeSpace-BasicDataAccessSpaceOperations"></a>Basic Data Access Space Operations</h3>
<p>The <tt>GigaSpace</tt> interface supports a number of Space operations: </p>
<ul>
	<li><b>Read</b>: Enables you to read objects from the Space. The criteria can be specified via one of the following:
	<ul>
		<li><em>Template matching</em> (JavaSpaces term for the equivalent of Hibernate's <a href="http://docs.jboss.org/hibernate/stable/core/reference/en/html/querycriteria.html#querycriteria-examples">Example API</a>.</li>
		<li>SQL-like queries.</li>
		<li>Based on a certain object's ID (every object in the Space has a unique identifier which distinguishes it from other objects).</li>
	</ul>
	</li>
</ul>


<p>As per the JavaSpaces model, when you read an object from the Space, you can specify a timeout for the read operation. This means that the calling code can block until a certain object is written to the Space, which allows for much more sophisticated communication patterns that use the Space as a collaborative work area between multiple Space clients. <br/>
At the API level, the <tt>GigaSpace</tt> interface contains a number of options to read data. You can read a single object (<tt>read() methods</tt>), you can read a batch of objects (<tt>readMultiple()</tt> methods), or read an object by its ID (<tt>readById()</tt> methods and <tt>readByIds()</tt> methods). <br/>
It also enables you to read objects asynchronously, using the (<tt>asyncRead()</tt> methods). </p>

<ul>
	<li><b>Write</b>: Enables you to write instances to the Space, or update existing instances in it. When you write an instance to the Space, you can specify a <em>lease</em> for that instance. The lease determines how long the object will live in the Space. Once the lease expires, the object is automatically cleared from the Space.</li>
</ul>


<ul>
	<li><b>Take</b>: The take operation is similar to the read operation, but instead of just returning the read data to the client, it actually removes it from the Space. The take operation also supports a timeout argument (also referred to as a <em>blocking take</em>). A blocking take is used as the foundation for point-to-point messaging capabilities of the Space (for more details refer to <a href="Polling Container.html" title="Polling Container">this page</a>).<br/>
As with the read operation, the <tt>GigaSpace</tt> interface also supports asynchronous, ID-based, and batch take operations. </li>
</ul>


<ul>
	<li><b>Clear</b>: Removes the matched object(s) from the Space, but does not return them to the client like the take operation. Use this operation when you would like to delete certain objects from the Space, but your application does not need to access the removed objects. In general, the clear operation is a bit faster than take, since it does not return anything to the client.</li>
</ul>


<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Using the Space as a Messaging Bus</b><br /><br/>
The Space can also be used to deliver events (messages) to your application. This is based on its ability to support blocking operations, and the Space's built-in notification API. This section only deals with the data access aspects of the Space. Refer to <a href="Messaging and Events.html" title="Messaging and Events">this section</a> for details about the Space's messaging capabilities.</td></tr></table></div>

<h3><a name="DeployingandInteractingwiththeSpace-Creatinga%7B%7BGigaSpace%7D%7DInstance"></a>Creating a <tt>GigaSpace</tt> Instance </h3>
<p>Creating a <tt>GigaSpace</tt> instance is done by wrapping an existing IJSpace instance, or by providing details about the Space you would like to connect to. This can be done programmatically, or via Spring. Here is an example: </p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="DeployingandInteractingwiththeSpace-SpringConfiguration%28NameSpace%29"></a>Spring Configuration (NameSpace)</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;os-core:space id=<span class="code-quote">"space"</span> url=<span class="code-quote">"jini://*/*/mySpace"</span> /&gt;</span>
<span class="code-tag">&lt;os-core:giga-Space id=<span class="code-quote">"gigaSpace"</span> space=<span class="code-quote">"space"</span>/&gt;</span></pre>
</div></div> 


<h5><a name="DeployingandInteractingwiththeSpace-SpringConfiguration%28Plain%29"></a>Spring Configuration (Plain)</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-xml"><span class="code-tag">&lt;bean id=<span class="code-quote">"space"</span> class=<span class="code-quote">"org.openSpaces.core.Space.UrlSpaceFactoryBean"</span>&gt;</span>
    <span class="code-tag">&lt;property name=<span class="code-quote">"url"</span> value=<span class="code-quote">"jini:/*/*/mySpace"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span>
<span class="code-tag">&lt;bean id=<span class="code-quote">"gigaSpace"</span> class=<span class="code-quote">"org.openSpaces.core.GigaSpaceFactoryBean"</span>&gt;</span>
	<span class="code-tag">&lt;property name=<span class="code-quote">"Space"</span> ref=<span class="code-quote">"space"</span> /&gt;</span>
<span class="code-tag">&lt;/bean&gt;</span></pre>
</div></div> 


<h5><a name="DeployingandInteractingwiththeSpace-JavaCodeOption1"></a>Java Code - Option 1</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">IJSpace space = <span class="code-keyword">new</span> UrlSpaceConfigurer(<span class="code-quote">"jini:<span class="code-comment">//*/*/mySpace"</span>).space();
</span>GigaSpace gigaSpace = <span class="code-keyword">new</span> GigaSpaceConfigurer(space).gigaSpace();</pre>
</div></div> 


<h5><a name="DeployingandInteractingwiththeSpace-JavaCodeOption2"></a>Java Code - Option 2</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">GigaSpace gigaSpace = <span class="code-keyword">new</span> GigaSpaceConfigurer(<span class="code-keyword">new</span> UrlSpaceConfigurer(<span class="code-quote">"jini:<span class="code-comment">//*/*/mySpace"</span>)).gigaSpace();</span></pre>
</div></div>
</div></div>

<p>Once you have access to a <tt>GigaSpace</tt> instance, you can start operating on the Space, namely write objects to it, and read and take objects from it. </p>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Cleaning up resources after using the space</b><br />
<p>There are two types of resources associated with space instances and space clients. </p>
<ol>
	<li><b>Thread and memory resources</b>: If your space client or embedded space are running within a Spring-enabled environment (e.g. the GigaSpaces service grid or a standalone Spring application), and are configured in a Spring application context, these resources will be cleaned up automatically when the Spring application context is destroyed.<br/>
However, if you start the space client or space instance programatically, you must call the <tt>UrlSpaceConfigurer#destroy</tt> method when your application no longer uses the space instance / space client. </li>
	<li><b>Communication resources</b>: All communication related resources in GigaSpaces are are shared between all the GigaSpaces components<br/>
at the Java classloader level. If you're using the <a href="The Runtime Environment.html" title="The Runtime Environment">GigasSpaces service grid</a> to run your GigaSpaces application you do not need to handle communication resources cleanup explicitly. But if your application runs on a standalone environment or another hosted <br/>
environment (e.g. a JEE application server) you will need to explicitly clean up those resources. <br/>
You should make sure to shutdown these resources explicitly when your application no longer uses the GigaSpaces components (e.g. when it's undeployed from the application server). This is done by calling the static method <a href="http://www.gigaspaces.com/docs/JavaDoc7.1/com/gigaspaces/lrmi/LRMIManager.html"><tt>LRMIManager#shutdown</tt></a>. <br/>
Note that if the JVM process is shut down anyway, you do not need to do explicitly shut down the communication resources. </li>
</ol>
</td></tr></table></div>




<h1><a name="DeployingandInteractingwiththeSpace-SpaceOperations"></a>Space Operations</h1>
<div class="error"><span class="error">Error formatting macro: toc-zone: java.lang.NullPointerException</span> </div>

<h3><a name="DeployingandInteractingwiththeSpace-WritingObjectstotheSpace"></a>Writing Objects to the Space</h3>
<p>In order to write or update objects in the Space, you should use the <tt>write</tt> method of the <tt>GigaSpace</tt> interface. The <tt>write</tt> method is used to write objects if these are introduced for the first time, or update them if these already exist in the space. In order to override these default semantics, you can use the overloaded <tt>write</tt> methods which accept update modifiers such as <tt>UpdateModifiers.UPDATE_ONLY</tt>.<br/>
Here is an example of writing an instance of the above <tt>Data</tt> class to the space: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Person person = <span class="code-keyword">new</span> Person();
person.setName(<span class="code-quote">"foo"</span>);
person.setLastName(<span class="code-quote">"bar"</span>); 
person.setAge(25);
gigaSpace.write(person);</pre>
</div></div>

<p>The <tt>GigaSpace</tt> interface also supports writing objects in batches. The corresponding methods for this are named <tt>writeMultiple</tt>, and are mainly used to batch operations over a single network call in case you write to a remote space. <br/>
Note that you can specify a <em>lease</em> when writing objects to the space. This determines how long the object is stored in the space before it is discarded (by default, <em>Lease.FOREVER</em> is used). </p>

<h3><a name="DeployingandInteractingwiththeSpace-ReadingObjectsfromtheSpace"></a>Reading Objects from the Space</h3>
<p>The <tt>read</tt> methods are used to retrieve objects from the Space. The <tt>read</tt> method returns a copy of the matching object to the client. To read more than one object, you should use the <tt>readMultiple</tt> methods of the <tt>GigaSpace</tt> interface. To define the criteria for the operation, all of these methods accept either a template object, or an <tt>SQLQuery</tt> instance. A template object is an example object of the class you would like to read. For an object in the space to match the template, each of the non-null properties in the template must match its values for these properties. <br/>
<img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> To simply read an object by its ID, you should use one of the <tt>readById</tt>/<tt>readByIds</tt> methods. <br/>
Here is an example for reading with a template, and by id: </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">// readById
</span><span class="code-object">Integer</span> id = ...<span class="code-comment">//get the id
</span><span class="code-object">Integer</span> routing = ...<span class="code-comment">//get the routing value (not mandatory, but more efficient)
</span>Person result1 = gigaSpace.readById(Person.class, id, routing); <span class="code-comment">//second argument determines routing
</span>
<span class="code-comment">// readByIds
</span><span class="code-object">Integer</span>[] ids = <span class="code-keyword">new</span> <span class="code-object">Integer</span>[] { ... <span class="code-comment">// object ids
</span><span class="code-object">Integer</span>[] routingKeys = <span class="code-keyword">new</span> <span class="code-object">Integer</span>[] { ... <span class="code-comment">// get the routing keys values (not mandatory, but more efficient)
</span>ReadByIdsResult&lt;Person&gt; result = gigaSpace.readByIds(Person.class, ids, routingKeys);
<span class="code-keyword">for</span> (Person person : result) {
  <span class="code-comment">// ...
</span>}

<span class="code-comment">//template matching 
</span>Person template = <span class="code-keyword">new</span> Person(); 
template.setFirstName(<span class="code-quote">"foo"</span>); 
template.setLastName(<span class="code-keyword">null</span>);<span class="code-comment">//means any value 
</span>Person result2 = gigaSpace.read(template) ; <span class="code-comment">// read by template
</span><span class="code-comment">//50 is the maximum number of results to retrieve
</span>Person[] multipleResults = gigaSpace.readMultiple(template, 50); 

<span class="code-comment">//SQLQuery
</span>SQLQuery&lt;Person&gt; query = <span class="code-keyword">new</span> SQLQuery&lt;Person&gt;(<span class="code-quote">"(name = ?) AND (age&gt;? AND age&lt;?)"</span>);
template.setParameters(<span class="code-quote">"foo"</span> , 25 , 30);
<span class="code-comment">// returns all Person objects whose name is 'foo' and age between 25-30 (non-inclusive)
</span>Person[] multipleResults2 = gigaSpace.readMultiple(query, 50);</pre>
</div></div>
<p>Note that you can specify a timeout for the read operations. This causes the calling code to block until a result becomes becomes available (or until the specified number of results is available in the case of <tt>readMultiple</tt>).<br/>
In general, <tt>SQLQuery</tt> is more powerful than template matching, at the price of a slightly slower performance due to the parsing that needs to take place before the query can be executed. </p>

<h3><a name="DeployingandInteractingwiththeSpace-TakingObjectsfromtheSpace"></a>Taking Objects from the Space</h3>
<p>The <tt>take</tt> methods have similar method signatures as the <tt>read</tt> methods. The main difference is that <tt>take</tt> removes the object from the Space, in addition to returning a copy of it to the client. <br/>
As with <tt>read</tt>, the <tt>take</tt> operation can also specify a timeout value. </p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">// takeById
</span><span class="code-object">Integer</span> id = ...<span class="code-comment">//get the id
</span><span class="code-object">Integer</span> routing = ...<span class="code-comment">//get the routing value (not mandatory, but more efficient)
</span>Person result1 = gigaSpace.takeById(Person.class, id, routing); 

<span class="code-comment">// takeByIds
</span><span class="code-object">Integer</span>[] ids = <span class="code-keyword">new</span> <span class="code-object">Integer</span>[] { ... <span class="code-comment">// object ids
</span><span class="code-object">Integer</span>[] routingKeys = <span class="code-keyword">new</span> <span class="code-object">Integer</span>[] { ... <span class="code-comment">// get the routing keys values (not mandatory, but more efficient)
</span>TakeByIdsResult&lt;Person&gt; result = gigaSpace.takeByIds(Person.class, ids, routingKeys);
<span class="code-keyword">for</span> (Person person : result) {
  <span class="code-comment">// ...
</span>}

<span class="code-comment">//template matching 
</span>Person template = <span class="code-keyword">new</span> Person(); 
template.setFirstName(<span class="code-quote">"foo"</span>); 
template.setLastName(<span class="code-keyword">null</span>);<span class="code-comment">//means any value 
</span>Person result2 = gigaSpace.take(template) ; <span class="code-comment">// take by template
</span><span class="code-comment">//50 is the maximum number of results to take
</span>Person[] multipleResults = gigaSpace.takeMultiple(template, 50); 

<span class="code-comment">//SQLQuery
</span>SQLQuery&lt;Person&gt; query = <span class="code-keyword">new</span> SQLQuery&lt;Person&gt;(<span class="code-quote">"(name = ?) AND (age&gt;? AND age&lt;?)"</span>);
template.setParameters(<span class="code-quote">"foo"</span> , 25 , 30);
<span class="code-comment">// returns all Person objects whose name is 'foo' and age between 25-30 (non-inclusive)
</span>Person[] multipleResults2 = gigaSpace.takeMultiple(query, 50);</pre>
</div></div>

<h3><a name="DeployingandInteractingwiththeSpace-OrderingofResults"></a>Ordering of Results </h3>
<p>The Space matches the stored object with the template to return a result. Matched objects are stored in the Space and returned from it in no particular order. However you can use <a href="FIFO Support.html" title="FIFO Support">FIFO ordering</a> or the <tt>ORDER BY</tt> statement to control the ordering. </p></div>



                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
