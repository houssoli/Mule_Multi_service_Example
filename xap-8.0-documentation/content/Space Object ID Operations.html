<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Space Object ID Operations</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Space Object ID Operations</h1>
</div>
<br>

<script type='text/javascript'>//<![CDATA[
function debug() { }
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/browser.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/behaviour.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/memory.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/cloak.js'>//<![CDATA[
// ]]></script><script type='text/javascript'>//<![CDATA[
Cloak.closeHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_down_10.gif\'/>";
Cloak.openHTML = "<img src=\'/wiki/download/resources/net.customware.confluence.plugin.composition:toggle-cloak/img/navigate_right_10.gif\'/>";
Cloak.toggleZone = true;
Cloak.memoryDuration = 0;
Cloak.memoryPrefix = "contentId:53903606";
Cloak.memoryPath = "/wiki/";
// ]]></script><style type='text/css'>
.cloakToggle { /* Definition for state toggling image */
cursor:hand;
cursor:pointer;
}
</style><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/transitions.js'>//<![CDATA[
// ]]></script><script type='text/javascript' src='/wiki/download/resources/net.customware.confluence.plugin.composition:composition-setup/js/deck.js'>//<![CDATA[
// ]]></script><link rel='stylesheet' type='text/css'  href='/wiki/styles/main-action.css?pluginCompleteKey=net.customware.confluence.plugin.composition:composition-setup&stylesheetName=deck&spaceKey=XAP8'/><script type='text/javascript'>//<![CDATA[
Deck.memoryDuration = 0;
Deck.memoryPrefix = "contentId:53903606";
Deck.memoryPath = "/wiki/";
// ]]></script>

<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Space Object ID Usage </p>
</div>

<h1><a name="SpaceObjectIDOperations-HowSpaceObjectIDisGenerated%3F"></a>How Space Object ID is Generated?</h1>

<p>You can insert an object into the space using the <tt>write()</tt> and <tt>writeMultiple()</tt> methods. When a new object is inserted into the space, it embeds a unique ID - called the UID. The UID can be generated explicitly by the client using a unique value generated by the application business logic or using a sequencer running within the space.</p>

<p>The space UID for space object can be created in three different ways:</p>
<ul>
	<li>When a space object has no <tt>SpaceId</tt> property declared, the space generates a UID for the object.</li>
	<li>When a space object has a property which is declared as <tt>SpaceId</tt> and marked as <tt>auto-generate=false</tt>, the UID is generated based on the value of the ID field the user is setting.</li>
	<li>When a space object has a property which is declared as <tt>SpaceId</tt> and marked as <tt>auto-generate=true</tt>, the UID is generated by the space and placed back into the field using the relevant setter method. In this case, the field must be a <tt>java.lang.String</tt> type.</li>
</ul>


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>See the <a href="http://www.gigaspaces.com/wiki/display/SBP/Global+ID+Generator" title="Global ID Generator">Global ID Generator</a> for a generic ID generator service you may use with your application.</td></tr></table></div>

<h1><a name="SpaceObjectIDOperations-FetchinganobjectfromtheSpace"></a>Fetching an object from the Space</h1>

<p>Space objects can be fetched from the space using the <a href="http://www.gigaspaces.com/docs/JavaDoc7.1/org/openspaces/core/GigaSpace.html" target="_blank">GigaSpace</a> interface methods <tt>read()</tt>, <tt>readMultiple()</tt>, <tt>readIfExists()</tt>, <tt>take()</tt>, <tt>takeMultiple()</tt>, <tt>takeIfExists()</tt> , <tt>readByID()</tt> and <tt>takeByID()</tt>.</p>

<p>The  <tt>readByID()</tt> and <tt>takeByID()</tt> allows you to read or remove objects using their IDs (and their routing value) without constructing a template or <a href="SQLQuery.html" title="SQLQuery">SQLQuery</a>.</p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>XAP 7.1.1 support the <tt>readByIds</tt> and <tt>takeByIds</tt> methods. These allows fetching a collection of objects using their IDs.</td></tr></table></div>

<h1><a name="SpaceObjectIDOperations-ReadinganObjectusingitsID"></a>Reading an Object using its ID</h1>

<p>With the following code example, the <tt>EmployeeID</tt> field is decorated using <tt>@SpaceId (autogenerate=false)</tt> or via:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;id name=<span class="code-quote">"employeeID"</span> auto-generate=<span class="code-quote">"<span class="code-keyword">false</span>"</span> /&gt;</pre>
</div></div>

<p>Here is how you can fetch the object back from the space:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">GigaSpace gigaSpace;
Employee myEmployee = gigaSpace.readByID(Employee.class , myEmployeeID , routingValue);</pre>
</div></div>

<h1><a name="SpaceObjectIDOperations-ReadingMultipleObjectsusingtheirIDs"></a>Reading Multiple Objects using their IDs</h1>
<p>The following shows how to read multiple objects using their IDs:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">GigaSpace gigaSpace;

<span class="code-comment">// Initialize an ids array
</span><span class="code-object">Integer</span>[] ids = <span class="code-keyword">new</span> <span class="code-object">Integer</span>[] { ... };

<span class="code-comment">// Set a routing key value (not mandatory but more efficient)
</span><span class="code-object">Integer</span> routingKey = ...;

<span class="code-comment">// Read objects from space
</span>ReadByIdsResult&lt;Employee&gt; result = gigaSpace.readByIds(Employee.class, ids, routingKey);

<span class="code-comment">// Loop through results
</span><span class="code-keyword">for</span> (Employee employee : result) {
  <span class="code-comment">// ...
</span>}</pre>
</div></div>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>See <a href="Parent Child Relationship.html" title="Parent Child Relationship">Parent Child Relationship</a> for a full usage example of the <tt>readByIds</tt> operation.</td></tr></table></div>

<h1><a name="SpaceObjectIDOperations-TheSpaceIdFieldcontent"></a>The SpaceId Field content</h1>
<ul>
	<li>When a space Class has no <tt>SpaceId</tt> property declared, it will be returned without any ID. This means that <b>update operations cannot be executed</b> on the space Class. Only the <tt>read()</tt> and <tt>write()</tt> methods can be executed.</li>
	<li>When a space Class has a property which is declared as <tt>SpaceId</tt> and <tt>auto-generate=true</tt> and its value is <tt>null</tt>, the <tt>SpaceId</tt> field will store the ID.</li>
	<li>When a space Class has a property which is declared as <tt>SpaceId</tt> and <tt>auto-generate=true</tt> and its value is not null, the <tt>SpaceId</tt> field will store the original value stored within the <tt>SpaceId</tt> field.</li>
	<li>When a space Class has a property which is declared as <tt>SpaceId</tt> and <tt>auto-generate=false</tt>, the <tt>SpaceId</tt> field will store the original value stored within the <tt>SpaceId</tt> field used to generate the UID.</li>
</ul>


<h1><a name="SpaceObjectIDOperations-CompoundSpaceId"></a>Compound SpaceId</h1>
<p>You might need to construct an ID that will be comprised from a user defined Object rather than using a Numeric or String type field. In such a case your user defined class used as the SpaceId data type must implement the <tt>hashCode</tt> and <tt>equals</tt> methods. See below example:</p>


<div class="panel" style="background-color: #FFFFFF;border-color: #3C78B5;border-style: solid;border-width: 1px;"><div class="panelContent" style="background-color: #FFFFFF;">
<h5><a name="SpaceObjectIDOperations-TheCompoundId"></a>The CompoundId</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>The CompoundId</b></div><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">import</span> java.io.Serializable;

<span class="code-keyword">public</span> class CompoundId <span class="code-keyword">implements</span> Serializable{
	<span class="code-keyword">public</span> <span class="code-object">String</span> key1;
	<span class="code-keyword">public</span> <span class="code-object">String</span> key2;
	<span class="code-keyword">public</span> <span class="code-object">String</span> key3;

	<span class="code-keyword">public</span> <span class="code-object">String</span> toString()
	{
		<span class="code-keyword">return</span> key1+ <span class="code-quote">"_"</span> + key2+ <span class="code-quote">"_"</span> + key3;
	}

	<span class="code-keyword">public</span> <span class="code-object">int</span> hashCode() {
		<span class="code-keyword">final</span> <span class="code-object">int</span> prime = 31;
		<span class="code-object">int</span> result = 1;
		result = prime * result + ((key1 == <span class="code-keyword">null</span>) ? 0 : key1.hashCode());
		result = prime * result + ((key2 == <span class="code-keyword">null</span>) ? 0 : key2.hashCode());
		result = prime * result + ((key3 == <span class="code-keyword">null</span>) ? 0 : key3.hashCode());
		<span class="code-keyword">return</span> result;
	}

	<span class="code-keyword">public</span> <span class="code-object">boolean</span> equals(<span class="code-object">Object</span> obj) {
		<span class="code-keyword">if</span> (<span class="code-keyword">this</span> == obj)
			<span class="code-keyword">return</span> <span class="code-keyword">true</span>;
		<span class="code-keyword">if</span> (obj == <span class="code-keyword">null</span>)
			<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		<span class="code-keyword">if</span> (getClass() != obj.getClass())
			<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		CompoundId other = (CompoundId) obj;
		<span class="code-keyword">if</span> (key1 == <span class="code-keyword">null</span>) {
			<span class="code-keyword">if</span> (other.key1 != <span class="code-keyword">null</span>)
				<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		} <span class="code-keyword">else</span> <span class="code-keyword">if</span> (!key1.equals(other.key1))
			<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		<span class="code-keyword">if</span> (key2 == <span class="code-keyword">null</span>) {
			<span class="code-keyword">if</span> (other.key2 != <span class="code-keyword">null</span>)
				<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		} <span class="code-keyword">else</span> <span class="code-keyword">if</span> (!key2.equals(other.key2))
			<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		<span class="code-keyword">if</span> (key3 == <span class="code-keyword">null</span>) {
			<span class="code-keyword">if</span> (other.key3 != <span class="code-keyword">null</span>)
				<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		} <span class="code-keyword">else</span> <span class="code-keyword">if</span> (!key3.equals(other.key3))
			<span class="code-keyword">return</span> <span class="code-keyword">false</span>;
		<span class="code-keyword">return</span> <span class="code-keyword">true</span>;
	}

}</pre>
</div></div>



<h5><a name="SpaceObjectIDOperations-TheSpaceClass"></a>The Space Class</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>The Space Class</b></div><div class="codeContent panelContent">
<pre class="code-java"><span class="code-keyword">import</span> com.gigaspaces.annotation.pojo.SpaceClass;
<span class="code-keyword">import</span> com.gigaspaces.annotation.pojo.SpaceId;

@SpaceClass
<span class="code-keyword">public</span> class MySpaceClass {
	CompoundId id;
	<span class="code-object">String</span> data;
	
	@SpaceId(autoGenerate = <span class="code-keyword">false</span>)
	<span class="code-keyword">public</span> CompoundId getId() {
		<span class="code-keyword">return</span> id;
	}
	
	<span class="code-keyword">public</span> void setId(CompoundId id) {
		<span class="code-keyword">this</span>.id = id;
	}
	<span class="code-keyword">public</span> <span class="code-object">String</span> getData() {
		<span class="code-keyword">return</span> data;
	}


	<span class="code-keyword">public</span> void setData(<span class="code-object">String</span> data) {
		<span class="code-keyword">this</span>.data = data;
	}
	
	<span class="code-keyword">public</span> <span class="code-object">String</span> toString() {
		<span class="code-keyword">return</span> <span class="code-quote">"ID:"</span> + id + <span class="code-quote">" Data:"</span>+ data;
	}
}</pre>
</div></div>


<h5><a name="SpaceObjectIDOperations-TheApplicationCode"></a>The Application Code</h5>
<hr 
 size="1" 
 color="#3C78B5" 
 >

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>The Application Code</b></div><div class="codeContent panelContent">
<pre class="code-java">GigaSpace space = <span class="code-keyword">new</span> GigaSpaceConfigurer (<span class="code-keyword">new</span> UrlSpaceConfigurer (<span class="code-quote">"jini:<span class="code-comment">//*/*/mySpace"</span>)).gigaSpace();
</span>
CompoundId id = <span class="code-keyword">new</span> CompoundId();
id.key1=<span class="code-quote">"1"</span>;
id.key2=<span class="code-quote">"2"</span>;
id.key3=<span class="code-quote">"3"</span>;

MySpaceClass obj = <span class="code-keyword">new</span> MySpaceClass();
obj.setData(<span class="code-quote">"AAAAAAAAA"</span>);
obj.setId(id);

space.write(obj);

MySpaceClass ret = space.readById(MySpaceClass.class, id);</pre>
</div></div>
</div></div>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
