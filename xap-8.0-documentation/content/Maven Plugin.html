<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Maven Plugin</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Maven Plugin</h1>
</div>
<br>



<div style="border-style:solid; border-color:#3C78B5; border-width:thin; padding-left:20px; padding-bottom:20px; padding-top:20px; padding-right:20px; background-color:#D8E4F1"> 

<p><b>Section Summary:</b>  Installing the OpenSpaces Maven plugin, creating and running a Processing Unit project. </p>
</div>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Note: you need to install the OpenSpaces artifacts on your local repository, as there is no public repository with the OpenSpaces artifacts available.</td></tr></table></div>

<h1><a name="MavenPlugin-Overview"></a>Overview</h1>

<p>Maven is a tool used to automate and simplify the development cycle of any Java-based project. The OpenSpaces plugin for Maven utilizes Maven to simplify the development cycle of OpenSpaces-based applications. You can use this plugin to easily create, compile, package, run unit tests, execute and deploy Processing Units.</p>

<p>You don't need to be an experienced Maven user to start working with this plugin. This section provides you with everything you need to know in order to start developing Processing Units with the Maven plugin. Experienced Maven users can use the Maven plugin to embed Processing Unit development with their existing development environment.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> The OpenSpaces Maven plugin has been tested with Maven 3.0.</p>

<p><img src="download/attachments/19890517/referto.gif" align="absmiddle" border="0"/> For further information about maven see: <a href="http://maven.apache.org/what-is-maven.html">apache.org; What is Maven?</a></p>

<h1><a name="MavenPlugin-PriortoInstallation"></a>Prior to Installation</h1>

<p>In order to use the OpenSpaces Maven plugin, Maven needs to be installed on the machine. If a Maven installation already exists on the machine, it can be used. If not, GigaSpaces comes with a ready-to-use distribution of Maven 3.0, located under: <tt>&lt;JSHOMEDIR&gt;/tools/maven/apache-maven-3.0</tt>.</p>

<p>All you need to do is add the Maven <tt>bin</tt> directory to the system <tt>PATH</tt> variable, and you are ready to go. To test whether the Maven command is accessible, open a command line window, type <tt>mvn &#45;version</tt>, and press Enter.<br/>
The following message should be displayed:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&gt;mvn -version

Apache Maven 3.0 (r1004208; 2010-10-04 13:50:56+0200)
Java version: 1.6.0_23
OS name: <span class="code-quote">"windows 7"</span> version: <span class="code-quote">"6.1"</span> arch: <span class="code-quote">"x86"</span> Family: <span class="code-quote">"windows"</span></pre>
</div></div>
<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> <b>First uses of Maven require internet connection</b> in order for the local repository to be populated with required libraries. Once all required libraries are in the local repository the internet connection is not mandatory.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> <b>Dependency Download by Maven</b><br/>
Maven uses repositories: a local repository where all required dependencies (artifacts) are stored for Maven's use, and remote repositories from which Maven downloads required dependencies that are missing in the local repository. If a dependency is missing from the local repository during execution, Maven automatically downloads the missing dependencies from the remote repositories. The download might take a few minutes (progress messages are printed to the console). When the download is finished, Maven returns to its original tasks.</p>


<h1><a name="MavenPlugin-Installation"></a>Installation</h1>

<p>To install the OpenSpaces Maven plugin:</p>

<p>Run the <tt>installmavenrep</tt> script from the <tt>&lt;GigaSpaces Root&gt;\tools\maven</tt> directory:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">D:\gigaspaces-xap-premium-8.0.0-ga\tools\maven&gt;installmavenrep.bat</pre>
</div></div>
<p>This installs the GigaSpaces libraries and the OpenSpaces Maven plugin into the local Maven repository. Once the installation is finished, the Maven plugin is ready to be used.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> The OpenSpaces Maven plugin is installed under: <tt>&lt;maven-repository-dir&gt;\org\apache\maven\plugins\maven-openspaces-plugin</tt></p>



<h2><a name="MavenPlugin-LocationofLibrariesandLocalRepository"></a>Location of Libraries and Local Repository</h2>

<p><b>Library Location</b>:</p>
<ul>
	<li>GigaSpaces libraries are installed under: <tt>&lt;maven-repository-dir&gt;/com/gigaspaces</tt></li>
	<li>OpenSpaces libraries are installed under: <tt>&lt;maven-repository-dir&gt;/org/openspaces</tt></li>
</ul>


<p><b>Local Repository Location:</b><br/>
By default, Maven creates the local repository under the your home directory: <tt>&lt;USER_HOME&gt;\.m2\repository</tt>.<br/>
For example, on Windows XP, the local repository is created in <tt>C:\Documents and Settings\&lt;username&gt;\.m2\repository</tt>.<br/>
However, the location of the repository can be changed by editing the <tt>settings.xml</tt> file under <tt>&lt;Maven Root&gt;\conf</tt>.</p>

<h1><a name="MavenPlugin-QueryingtheAvailableProjectTemplates"></a>Querying the Available Project Templates</h1>

<p>It is possible to view the list of the project templates available for use and their description.</p>

<p>In order to view the template list, use the following command-line:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:create</pre>
</div></div>

<p>The result is a list of available template names and descriptions:<br/>
1. <b>basic</b> - Creates a basic SBA application with two processing units. The Feeder processing unit sends Data objects through the Space to a Processor. The Space and the Processor are collocated in the same processing unit.</p>

<p>2. <b>basic-async-persistency</b> - Creates a basic SBA application with three processing units. The Feeder processing unit sends Data objects through the Space to a Processor. The Space and the Processor are collocated in the same processing unit.The Processor is connected to a Mirror and provides a reliable async replication and persistency to the Database using Hibernate. </p>

<p>3. <b>basic-xml</b> - Creates a basic SBA application with two processing units. The Feeder processing unit sends Data objects through the Space to a Processor. The Space and the Processor are collocated in the same processing unit.</p>

<p>4. <b>basic-async-persistency-xml</b> - Creates a basic SBA application with three processing units. The Feeder processing unit sends Data objects through the Space to a Processor. The Space and the Processor are collocated in the same processing unit. The Processor is connected to a Mirror and provides a reliable asynchronous replication and persistency to the Database using Hibernate.</p>

<p>5. <b>mule</b> - Creates a SBA application with two processing units that use mule as an ESB. The Feeder processing unit writes Data objects to the Space. The Processor processing unit uses the extended SEDA model to defines 3 services. A Verifier service that verifies unprocessed Data objects, an Approver service that approves verified Data objects and a Processor service that processes approved Data objects. The Space and the Processor are collocated in the same processing unit.</p>

<p>Use the -Dtemplate=&lt;template&gt; argument to specify a project template. Example:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:create -Dtemplate=basic-async-persistency</pre>
</div></div>

<h1><a name="MavenPlugin-CreatingProcessingUnitProject"></a>Creating Processing Unit Project</h1>

<p>The OpenSpaces Maven plugin can create Processing Unit projects. It generates the resources and the appropriate directory structure, making it easy to immediately start working on the Processing Units.</p>

<p>Projects can be created in any directory. Before creating the project change to the directory where the project should be created.</p>

<p>To create a Processing Unit project, use the following command-line:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:create
    -DgroupId=&lt;group-id&gt;
    -DartifactId=&lt;artifact-id&gt;
    -Dtemplate=&lt;project-template&gt;</pre>
</div></div>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>groupId</tt> </td>
<td class='confluenceTd'> The project package name </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> <tt>com.mycompany.app</tt> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>artifactId</tt> </td>
<td class='confluenceTd'> The project name </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> <tt>my-app</tt> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>template</tt> </td>
<td class='confluenceTd'> The project template </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/check.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
<p>The project is generated in the current directory (<tt>my-app</tt> directory).</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> Executing <tt>os:create</tt> without specifying a template shows a list of available templates and their description.</p>

<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> To start working with the project (compiling, packaging etc...) you should change directory to the directory of the project.</p>

<h1><a name="MavenPlugin-ProcessingUnitProjectStructure"></a>Processing Unit Project Structure</h1>

<p>Basically, a Processing Unit project structure is what Maven users call a multi-module project. It consists of a main (top-level) project that contains sub-projects called modules. A Processing Unit is implemented as a module of the main project, thus a main project might consist of many Processing Units.</p>

<p>The project, created by the <tt>default</tt> template, consists of a main project and three modules (sub-projects):</p>
<ul>
	<li><b>feeder</b> &#8211; a Processing Unit that writes data into the space.</li>
	<li><b>processor</b> &#8211; a Processing Unit that takes data from the space, processes it and writes the results back to the space.</li>
	<li><b>common</b> &#8211; a module that contains resources shared by both the feeder and the processor.</li>
</ul>


<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> The archives generated by the common module and its dependencies are added to the <tt>lib</tt> directory of the feeder's and processor's distributables.</p>

<p>The main project and each of the modules contain a project-descriptor file called <tt>pom.xml</tt>; which contains information about the project's properties, dependencies, build configuration, and so on. A module is considered a Processing Unit module if its <tt>pom.xml</tt> file contains the property <tt>gsType=PU</tt>. In this case, only the feeder and the processor are considered Processing Unit modules.</p>

<p>For a full overview of the OpenSpaces Maven plugin project templates, refer to: <em>link will be added soon.</em></p>

<h1><a name="MavenPlugin-CompilingtheProcessingUnitProject"></a>Compiling the Processing Unit Project</h1>

<p>In order to compile the Processing Unit project, use the following command line from the main project's directory.</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn compile</pre>
</div></div>

<p>This compiles each module and puts the output files under the modules' <em>target</em> directory.</p>

<h1><a name="MavenPlugin-RunningProcessingUnitModules"></a>Running Processing Unit Modules</h1>

<p>Sometimes, during development, the developer might want to run the Processing Unit module to check its functionality. The OpenSpaces Maven plugin allows you to run Processing Unit modules without the need to package them as Processing Unit distributables first. This feature saves time, while evading build phases that are not required for this task.</p>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> To run modules, they need to be compiled first.</p>

<p>Make sure you are in the directory of the project.<br/>
To run Processing Unit modules, use the following command-line (found in the <tt>artifactId</tt> folder):</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:run
    -Dcluster=&lt;<span class="code-quote">"cluster-properties"</span>&gt;
    -Dgroups=&lt;groups&gt;
    -Dlocators=&lt;locators&gt;
    -Dproperties=&lt;<span class="code-quote">"context-level-properties-location"</span>&gt;
    -Dmodule=&lt;module-name&gt;</pre>
</div></div>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Before version 6.6.1</b><br />
<p>In GigaSpaces versions prior to 6.6.1, os:run must be invoked together with the compile command as follows:<br/>
    <b>mvn compile os:run ...</b><br/>
Starting from version 6.6.1, running the module requires the module to be compiled once, which can be done in a separate command call.</p></td></tr></table></div>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Properties </th>
<th class='confluenceTh'> Example </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>cluster</tt> </td>
<td class='confluenceTd'> Cluster properties </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'><ul>
	<li><tt>schema</tt> &#8211; the cluster schema name</li>
	<li><tt>total_members</tt> &#8211; a list of the cluster members, separated by a comma</li>
	<li><tt>id</tt> &#8211; the cluster ID</li>
	<li><tt>backup_id</tt> &#8211; the backup ID</li>
</ul>
</td>
<td class='confluenceTd'><ul>
	<li><tt>schema=partitioned</tt></li>
	<li><tt>total_members=1,1</tt></li>
	<li><tt>id=1</tt></li>
	<li><tt>backup_id=1</tt></li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>groups</tt> </td>
<td class='confluenceTd'> Comma-delimited list of lookup group names </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> group1,group2 </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>locators</tt> </td>
<td class='confluenceTd'> Comma-delimited list of Jini locators hosts </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> jini://&lt;hostname1&gt;, jini://&lt;hostname2&gt; </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>properties</tt> </td>
<td class='confluenceTd'> Location of context-level properties </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'><ul>
	<li><tt>file</tt> &#8211; the properties file</li>
	<li><tt>embed</tt> &#8211; property definition</li>
</ul>
</td>
<td class='confluenceTd'> <div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>file://config/context.properties
</pre>
</div></div><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>embed://prop1=value1
</pre>
</div></div> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>module</tt> </td>
<td class='confluenceTd'> The name of the Processing Unit module to run </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>feeder</tt> </td>
</tr>
</tbody></table>
<p><b>Example:</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn compile os:run -Dcluster="schema=partitioned total_members=1,1 
id=1<span class="code-quote">" -Dproperties="</span>embed:<span class="code-comment">//prop1=value1" -Dmodule=feeder</span></pre>
</div></div>

<h2><a name="MavenPlugin-DeterminingModuleExecution"></a>Determining Module Execution</h2>
<ul class="alternate" type="square">
	<li>If the current directory is a the base directory of a module, only this module is executed.</li>
	<li>If the current directory is the main project directory and the <tt>module</tt> argument is not set, all modules are executed one by one.</li>
	<li>If the current directory is the main project directory and the <tt>module</tt> argument is set, only the specified module is executed.</li>
</ul>


<p><a name="MavenPlugin-overriding"></a></p>

<h2><a name="MavenPlugin-OverridingSpace%2FClusterConfiguration"></a>Overriding Space/Cluster Configuration</h2>

<p>If you need to override the configuration of the space or cluster when running the processing units through the OpenSpaces plugin and you want to do it by replacing the original configuration files, you can do it by placing the required file in the project's root directory.</p>

<p>Examples:<br/>
To change the logging configuration place the new <em>gs_logging.properties</em> file in the <em>config</em> directory (you may need to create this directory) under the project's root directory.</p>

<p>To change the security permissions place the new <em>policy.all</em> file in the <em>policy</em> directory (you may need to create this directory) under the project's root directory.</p>

<p><a name="MavenPlugin-packaging"></a></p>

<h1><a name="MavenPlugin-PackagingProcessingUnits"></a>Packaging Processing Units</h1>

<p>In order to deploy Processing Units, you need to package them in a distributable form. The OpenSpaces Maven plugin allows you to package two types of distributables supported by GigaSpaces: a single JAR archive and an open directory structure.</p>

<p>Make sure you are in the directory of the project.<br/>
To package the Processing Units, use the following command-line from the main project directory:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn <span class="code-keyword">package</span></pre>
</div></div>
<p>The Processing Units' distributable bundles are generated for each module, under the directory <tt>target</tt>. For example, the distributables of a module named <tt>feeder</tt> are generated under <tt>&lt;proj-dir&gt;\feeder\target</tt>.</p>

<p>The single JAR distributable is <tt>feeder.jar</tt>; the open directory structure distributable is created under the directory <tt>feeder</tt>.</p>

<h2><a name="MavenPlugin-SuppressingUnitTestExecutionWhilePackaging"></a>Suppressing Unit Test Execution While Packaging</h2>

<p>If not specified explicitly, unit tests are executed when packaging the Processing Units.</p>

<p>To suppress the execution of unit tests, add one of the following arguments to the command line: <tt>skipTests</tt> or <tt>maven.test.skip</tt>:</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>skipTests</tt> </td>
<td class='confluenceTd'> Skips the unit test execution, but still performs unit test compilation </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>maven.test.skip</tt> </td>
<td class='confluenceTd'> Skips the unit testing phase entirely, including the test compilation </td>
</tr>
</tbody></table>
<p>For example:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&gt;mvn <span class="code-keyword">package</span> -DskipTests

 .. or ..

&gt;mvn <span class="code-keyword">package</span> -Dmaven.test.skip</pre>
</div></div>

<h1><a name="MavenPlugin-RunningProcessingUnits"></a>Running Processing Units</h1>

<p>After packaging the Processing Units, you might want to test the validity of the assemblies. The OpenSpaces Maven plugin makes it possible to run the Processing Units as standalone modules. The Maven plugin includes all the assembly dependencies in the execution classpath, making sure that the Processing Unit finds all the required resources. Managing to run the Processing Unit as a module while failing to run it as a standalone module might imply that a problem exists with the assembly definitions.</p>

<p>Make sure you are in the directory of the project.<br/>
To run Processing Units as standalone modules, use the following command-line:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:run-standalone
    -Dcluster=&lt;<span class="code-quote">"cluster-properties"</span>&gt;
    -Dgroups=&lt;groups&gt;
    -Dlocators=&lt;locators&gt;
    -Dproperties=&lt;<span class="code-quote">"context-level-properties-location"</span>&gt;
    -Dmodule=&lt;module-name&gt;</pre>
</div></div>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Properties </th>
<th class='confluenceTh'> Example </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>cluster</tt> </td>
<td class='confluenceTd'> Cluster properties </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'><ul>
	<li><tt>schema</tt> &#8211; the cluster schema name</li>
	<li><tt>total_members</tt> &#8211; a list of the cluster members, separated by a comma</li>
	<li><tt>id</tt> &#8211; the cluster ID</li>
	<li><tt>backup_id</tt> &#8211; the backup ID</li>
</ul>
</td>
<td class='confluenceTd'><ul>
	<li><tt>schema=partitioned</tt></li>
	<li><tt>total_members=1,1</tt></li>
	<li><tt>id=1</tt></li>
	<li><tt>backup_id=1</tt></li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>groups</tt> </td>
<td class='confluenceTd'> Comma-delimited list of lookup group names </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> group1,group2 </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>locators</tt> </td>
<td class='confluenceTd'> Comma-delimited list of Jini locators hosts </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> jini://&lt;hostname1&gt;, jini://&lt;hostname2&gt; </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>properties</tt> </td>
<td class='confluenceTd'> Context-level properties location </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'><ul>
	<li><tt>file</tt> &#8211; properties file</li>
	<li><tt>embed</tt> &#8211; properties definition</li>
</ul>
</td>
<td class='confluenceTd'> <div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>file://config/context.properties
</pre>
</div></div><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>embed://prop1=value1
</pre>
</div></div> </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>module</tt> </td>
<td class='confluenceTd'> The name of the Processing Unit module to run </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> <tt>feeder</tt> </td>
</tr>
</tbody></table>
<p><b>Example:</b></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:run-standalone -Dcluster="schema=partitioned total_members=1,1 
id=1<span class="code-quote">" -Dproperties="</span>embed:<span class="code-comment">//prop1=value1" -Dmodule=feeder</span></pre>
</div></div>

<h2><a name="MavenPlugin-DeterminingProcessingUnitExecution"></a>Determining Processing Unit Execution</h2>
<ul class="alternate" type="square">
	<li>If the current directory is a Processing Unit module's base directory, only this Processing Unit is executed.</li>
	<li>If the current directory is the main project directory and the <tt>pu-name</tt> argument is not set, all Processing Units are executed one by one.</li>
	<li>If the current directory is the main project directory and the <tt>pu-name</tt> argument is set, only the specified Processing Unit is executed.</li>
</ul>


<h2><a name="MavenPlugin-OverridingSpace%2FClusterConfiguration"></a>Overriding Space/Cluster Configuration</h2>
<p>Overriding the space and cluster configuration is explained in <a href="#MavenPlugin-overriding">Running Processing Unit Modules</a>.</p>

<h1><a name="MavenPlugin-DeployingProcessingUnits"></a>Deploying Processing Units</h1>
<p>Processing Units usually run in the Service Grid. In order to deploy a Processing Unit, you first need to package it (see <a href="#MavenPlugin-packaging">Packaging Processing Units</a>).</p>

<p>GigaSpaces supports two forms of Processing Unit distributables: A single JAR archive and an open directory structure. The OpenSpaces Maven plugin allows you to deploy Processing Units simply &#8211; packaged as JAR archives &#8211; into the Service Grid.</p>

<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> When deploying Processing Units, make sure that the Grid Service Manager (GSM) and the Grid Service Container (GSC) are running. For more details, refer to the <a href="Running Services - GSC and GSM.html" title="Running Services - GSC and GSM">Running Services &#45; GSC and GSM</a> section.</p>

<p>Make sure you are in the directory of the project.<br/>
Once your Processing Units are packaged, use the following command-line to deploy them to the Service Grid:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:deploy
    -Dsla=&lt;sla&gt;
    -Dcluster=&lt;cluster&gt;
    -Dgroups=&lt;groups&gt;
    -Dlocators=&lt;locators&gt;
    -Dtimeout=&lt;timeout&gt;
    -Dproperties=&lt;<span class="code-quote">"prop1=val1 prop2=val2..."</span>&gt;
    -Doverride-name=&lt;override-name&gt;
    -Dmax-instances-per-vm=&lt;max-instances-per-vm&gt;
    -Dmax-instances-per-machine=&lt;max-instances-per-machine&gt;
    -Dmodule=&lt;module-name&gt;</pre>
</div></div>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>sla</tt> </td>
<td class='confluenceTd'> The SLA policy </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>cluster</tt> </td>
<td class='confluenceTd'> The name of the cluster </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>groups</tt> </td>
<td class='confluenceTd'> Comma-delimited list of lookup group names </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> gigaspaces-&lt;VERSION&gt; </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>locators</tt> </td>
<td class='confluenceTd'> Comma-delimited list of Jini locators hosts </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>timeout</tt> </td>
<td class='confluenceTd'> Timeout </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> 10000 </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>properties</tt> </td>
<td class='confluenceTd'> The properties file name or key-value pairs </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>override-name</tt> </td>
<td class='confluenceTd'> Override name </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>max-instances-per-vm</tt> </td>
<td class='confluenceTd'> The maximum instances per virtual machine </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>max-instances-per-machine</tt> </td>
<td class='confluenceTd'> The maximum instances per machine (host) </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>module</tt> </td>
<td class='confluenceTd'> The name of the Processing Unit module to deploy </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
<p>If the current directory is a Processing Unit module's base directory, only this processing unit is deployed.</p>

<p>If the current directory is the main project directory and the <tt>pu-name</tt> argument is not set, Maven deploys the Processing Unit in the order described <a href="#MavenPlugin-order">below</a>.</p>

<p>If the current directory is the main project directory and the <tt>pu-name</tt> argument is set, only the specified Processing Unit is deployed.</p>

<h1><a name="MavenPlugin-UndeployingProcessingUnits"></a>Undeploying Processing Units</h1>
<p>The OpenSpaces Maven plugin makes it simple to undeploy Processing Units from the Service Grid. Make sure you are in the directory of the project. To undeploy a Processing Unit from the Service Grid, use the following command-line:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:undeploy
    -Dgroups=&lt;groups&gt;
    -Dlocators=&lt;locators&gt;
    -Dtimeout=&lt;timeout&gt;
    -Dmodule=&lt;module-name&gt;</pre>
</div></div>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>groups</tt> </td>
<td class='confluenceTd'> Comma-delimited list of lookup group names </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> gigaspaces-&lt;VERSION&gt; </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>locators</tt> </td>
<td class='confluenceTd'> Comma-delimited list of Jini locators hosts </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>timeout</tt> </td>
<td class='confluenceTd'> Timeout </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> 10000 </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>module</tt> </td>
<td class='confluenceTd'> The name of the Processing Unit module to undeploy </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>

<ul class="alternate" type="square">
	<li>If the current directory is a Processing Unit module's base directory, only this Processing Unit is undeployed.</li>
	<li>If the current directory is the main project directory and the <tt>pu-name</tt> argument is not set, Maven undeploys the Processing Unit the order described <a href="#MavenPlugin-order">below</a>.</li>
	<li>If the current directory is the main project directory and the <tt>pu-name</tt> argument is set, only the specified Processing Unit is undeployed.</li>
</ul>


<p><a name="MavenPlugin-order"></a></p>

<h1><a name="MavenPlugin-ControllingOrderofDeployment%2FUndeployment"></a>Controlling Order of Deployment/Undeployment</h1>


<h2><a name="MavenPlugin-Deployment"></a>Deployment</h2>

<p>A Processing Unit might have a dependency on another Processing Unit (this dependency is defined in the Processing Unit <tt>pom.xml</tt> file). It is important to deploy these Processing Units in the right order to prevent errors.</p>

<ul class="alternate" type="square">
	<li>The independent Processing Unit should be deployed first, and the the dependent Processing Unit should be deployed second.</li>
	<li>The Maven plugin identifies these dependencies and deploys the Processing Units in the right order.</li>
	<li>If there is no dependency between the Processing Units, they are deployed in the same order in which the modules are declared in the main project <tt>pom.xml</tt> file.</li>
</ul>


<h2><a name="MavenPlugin-Undeployment"></a>Undeployment</h2>

<p>Undeployment of Processing Units takes place in a reverse order: the dependent Processing Unit is undeployed first and the independent second.</p>

<h1><a name="MavenPlugin-AddingDependenciestoModules"></a>Adding Dependencies to Modules</h1>

<p>A dependency is a library (usually a JAR archive containing class libraries) required by the Processing Unit for compilation, execution, etc.<br/>
For example, if the Processing Unit's code uses a class from an external archive, this archive needs to be added as a dependency of the Processing Unit.<br/>
Adding dependencies is done a Maven-typical way, which is editing the module's <tt>pom.xml</tt> file.<br/>
For example, to add <tt>commons-logging</tt> version 1.1.1 as a dependency to the processor Processing Unit, add the following XML snippet to the <tt>&lt;dependencies&gt;</tt> section of the <tt>pom.xml</tt> file:</p>

<p><a name="MavenPlugin-xml"></a></p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;project&gt;
    ...
    &lt;dependencies&gt;
        ...
        &lt;!--The added snippet--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;commons-logging&lt;/groupId&gt;
            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;
            &lt;version&gt;1.1.1&lt;/version&gt;
            &lt;scope&gt;compile&lt;/scope&gt;
        &lt;/dependency&gt;
        ...
    &lt;/dependencies&gt;
    ...
&lt;/project&gt;</pre>
</div></div>

<h2><a name="MavenPlugin-PrivateDependencies"></a>Private Dependencies</h2>

<p>Private dependencies are Processing Unit dependencies that are not shared with other Processing Units.<br/>
Processing Unit distributions hold private dependencies in the <tt>lib</tt> directory.<br/>
To add private dependency, add it to the Processing Unit module <tt>pom.xml</tt> file. For example, to add the <tt>commons-logging</tt> version 1.1.1 as a private dependency of the processor Processing Unit, add the XML snippet <a href="#MavenPlugin-xml">above</a> to the <b>processor</b> module's <tt>pom.xml</tt> file.<br/>
When the Processing Unit is packaged, the <tt>commons-logging</tt> archive is located under the <tt>lib</tt> directory of the processor distributable.</p>

<h2><a name="MavenPlugin-SharedDependencies"></a>Shared Dependencies</h2>

<p>Shared dependencies are Processing Unit dependencies that are shared with other Processing Units.</p>

<p>To add shared dependencies, add the dependencies to the common module <tt>pom.xml</tt> file. For example, to add the <tt>commons-logging</tt> version 1.1.1 as a shared dependency of the processor and the feeder Processing Units, add the XML snippet <a href="#MavenPlugin-xml">above</a> to the <b>common</b> module's <tt>pom.xml</tt> file.</p>

<p>When the Processing Units are packaged, the <tt>commons-logging</tt> archive is located under the <tt>lib</tt> directory of the processor and the feeder distributables.</p>

<h1><a name="MavenPlugin-ImportingProcessingUnitProjectstoEclipseIDE"></a>Importing Processing Unit Projects to Eclipse IDE</h1>
<p>It is possible to import a Processing Unit project into the Eclipse environment. Imported projects have built-in launch targets, allowing you to run the processor and the feeder using Eclipse run (or debug) targets.</p>

<h2><a name="MavenPlugin-1.GenerateEclipseProject"></a>1. Generate Eclipse Project</h2>

<p>Execute the following command from the project root directory:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn eclipse:eclipse</pre>
</div></div>
<p>This generates a <tt>.project</tt> file under each module's base directory.</p>

<h2><a name="MavenPlugin-2.ImportGeneratedProjectstoEclipseEnvironment"></a>2. Import Generated Projects to Eclipse Environment</h2>

<ol>
	<li>Select <b>File</b> &gt; <b>Import</b> &gt; <b>Existing Projects into Workspace</b>.</li>
	<li>In the <b>Import</b> dialog, keep the <b>Select root directory</b> option selected, and click <b>Browse</b>.</li>
	<li>Select the base directory of the project you want to import and click <b>Finish</b>.</li>
</ol>


<p>This imports the three modules to Eclipse, each as a separate project.</p>

<h2><a name="MavenPlugin-3.DefineM2REPOVariable"></a>3. Define M2_REPO Variable</h2>

<p>Imported projects use a variable called <tt>M2_REPO</tt> to point to the location of Maven's local repository. If this is a fresh Eclipse installation, the <tt>M2_REPO</tt> variable needs to be defined:</p>
<ol>
	<li>Select <b>Window</b> &gt; <b>Preferences</b>.</li>
	<li>In the <b>Preferences</b> dialog, select <b>Java</b> &gt; <b>Build Path</b> &gt; <b>Classpath Variables</b>, and click <b>New</b>.</li>
	<li>In the <b>New Variable Entry</b> dialog, type <tt>M2_REPO</tt> in the <b>Name</b> field.</li>
	<li>Press <b>Folder</b> and select the directory of Maven's local repository.</li>
	<li>Click <b>OK</b> to close all dialogs.</li>
</ol>


<h1><a name="MavenPlugin-ViewingPersistentData"></a>Viewing Persistent Data</h1>

<p>When running a Processing Unit that uses persistency, e.g when using the <em>basic-async-persistency</em> template, one would like to view the persisted data. OpenSpaces Maven Plugin makes it easy to start the HSQLDB viewer to immediately view persisted data.</p>

<p><img class="emoticon" src="images/icons/emoticons/warning.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> The HSQLDB viewer is for monitoring HSQLDB databases only.</p>

<p>To start the HSQLDB viewer use the following command-line:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">mvn os:hsql-ui
    -Ddriver=&lt;driver-class&gt;
    -Durl=&lt;url&gt;
    -Duser=&lt;user&gt;
    -Dpassword=&lt;password&gt;
    -Dhelp</pre>
</div></div>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Argument </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Required </th>
<th class='confluenceTh'> Default </th>
</tr>
<tr>
<td class='confluenceTd'> <tt>driver</tt> </td>
<td class='confluenceTd'> JDBC driver class </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> org.hsqldb.jdbcDriver </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>url</tt> </td>
<td class='confluenceTd'> JDBC url </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'> jdbc:hsqldb:hsql://localhost/testDB </td>
</tr>
<tr>
<td class='confluenceTd'> <tt>user</tt> </td>
<td class='confluenceTd'> User name used for the connection </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>password</tt> </td>
<td class='confluenceTd'> Password used for this user </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'> <tt>help</tt> </td>
<td class='confluenceTd'> Prints the usage options </td>
<td class='confluenceTd'> <img class="emoticon" src="images/icons/emoticons/error.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>

<p><img class="emoticon" src="images/icons/emoticons/information.gif" height="16" width="16" align="absmiddle" alt="" border="0"/> The default values are sufficient when using the data source values generated by the plugin.</p>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
