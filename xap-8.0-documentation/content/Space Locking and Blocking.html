<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
         <title>XAP 8.0 Documentation : Space Locking and Blocking</title>
<link rel="stylesheet" href="styles/site.css" type="text/css" />
         <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		 <style>
.back-to {
	color: #666666;
	font-weight: bold;
}	 
a.back-to:link, a.back-to:visited, a.back-to:hover, a.back-to:active  {
	color: #666666;
}	 
		 </style>
     </head>

     <body>
<table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
<tr>
<td valign="top" class="pagebody">
<div class="pageheader">
<span class="back-to">XAP 8.0 Documentation > <a href="index.html">Back to Table of Contents</a></span><br>
<h1>Space Locking and Blocking</h1>
</div>
<br>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Summary:</b> Using optimistic and pessimistic locking to preserve the integrity of changes in multi-user scenarios.<br/>
<b>Contents:</b>
<div class="error"><span class="error">Error formatting macro: toc: java.lang.NullPointerException</span> </div> </td></tr></table></div>

<h1><a name="SpaceLockingandBlocking-Overview"></a>Overview</h1>

<p>Locking of objects occurs in multi-user systems to preserve the integrity of changes, so that changes made by one process do not accidentally overwrite changes made by another process.<br/>
GigaSpaces provides two strategies for locking objects: Optimistic and pessimistic. Both of these are discussed below. The focus is on optimistic locking, the preferred strategy in the GigaSpaces context.</p>

<h1><a name="SpaceLockingandBlocking-BlockingRules"></a>Blocking Rules</h1>
<div class="error"><span class="error">Error formatting macro: toc-zone: java.lang.NullPointerException</span> 
<h2><a name="SpaceLockingandBlocking-BlockingRulesOverview"></a>Blocking Rules Overview</h2>
<p>Space operations have rules that specify whether they should be blocked if another operation takes place in parallel. Space operations can accept a transaction object, and this object can effect locking behavior.</p>

<p>These rules should be considered very carefully when building space-based applications, especially in scenarios with many concurrent users.<br/>
The following table describes space operation blocking rules. The operations listed on the top ("Operation B") are blocked, or allowed, when performed in conjunction with operations listed on the left ("Operation A").</p>

<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>TX denotes transaction, and it is assumed that operations A are called under a different transaction to operations B. If they are called under the same transaction, blocking behavior is different.</td></tr></table></div>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Oper. A / Oper. B</th>
<th class='confluenceTh'>Update under TX Y</th>
<th class='confluenceTh'>Take  under TX Y</th>
<th class='confluenceTh'>Read  under TX Y</th>
<th class='confluenceTh'>Update, <tt>null</tt> TX</th>
<th class='confluenceTh'>Take, <tt>null</tt> TX</th>
<th class='confluenceTh'>Read, <tt>null</tt> TX</th>
</tr>
<tr>
<th class='confluenceTh'>Update under TX X</th>
<td class='confluenceTd'> Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked (unless in <tt>dirty_read)</tt> </td>
</tr>
<tr>
<th class='confluenceTh'>Take under TX X</th>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
</tr>
<tr>
<th class='confluenceTh'>Read under TX X</th>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Blocked</td>
<td class='confluenceTd'>Allowed</td>
</tr>
<tr>
<th class='confluenceTh'>Update, <tt>null</tt> TX</th>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
</tr>
<tr>
<th class='confluenceTh'>Take, <tt>null</tt> TX</th>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
</tr>
<tr>
<th class='confluenceTh'>Read, <tt>null</tt> TX</th>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
<td class='confluenceTd'>Allowed</td>
</tr>
</tbody></table>

<h2><a name="SpaceLockingandBlocking-ReadOperation"></a>Read Operation</h2>

<p>A read lock guarantees that an object is not changed while you are looking at it. It is useful when you want to look at an object but not change it.</p>

<p>A read lock provides its guarantee by blocking all other requests for an update and take operation; it does not block other read requests. A request for a read operation is only blocked if the object already has an update operation.</p>

<h2><a name="SpaceLockingandBlocking-UpdateOperation"></a>Update Operation</h2>
<p>An update lock guarantees that you are the sole user of an object and that you are looking at the most up-to-date version of an object. It is useful when you want to update an existing object.</p>

<p>An update lock provides its guarantee by blocking all other requests for a read, take or update lock on a particular object. Conversely, a request for an update lock is blocked if the object already has a read, take or update lock.</p>

<h2><a name="SpaceLockingandBlocking-TakeOperation"></a>Take Operation</h2>

<p>The take operation behaves much like the read operation, except that a matching entry is also removed from the space.</p>

<p>A take lock provides its guarantee by blocking all other requests for read, take and update operations. A request for a take operation is blocked if the object already has an update lock, read lock or take lock.</p>

<h2><a name="SpaceLockingandBlocking-ClearOperation"></a>Clear Operation</h2>

<p>The clear operation behaves much like the take operation, except that a matching entry is not sent back to the client.</p>

<p>A <tt>clear</tt> lock provides its guarantee by blocking all other requests for read, take and update operations. A request for a <tt>clear</tt> operation is blocked if the object already has an update lock, read lock or take lock.</p>

<h2><a name="SpaceLockingandBlocking-OperationswithaNullTransaction"></a>Operations with a Null Transaction </h2>

<p>In general, when a space operation is called with a <tt>null</tt> transaction object, its scope is limited to the entry or entries passed to the operation. Any other space operations, with or without a transaction, can be executed without any blocking.</p></div>

<h1><a name="SpaceLockingandBlocking-MoreinthisSection"></a>More in this Section</h1>

<p><img src="download/attachments/53903503/referto.gif" align="absmiddle" border="0"/> <b><a href="Pessimistic Locking.html" title="Pessimistic Locking">Pessimistic Locking</a></b> &#8211; In the pessimistic locking approach, your program must explicitly obtain a lock using a transaction on one or more objects before making any changes.</p>

<p><img src="download/attachments/53903503/referto.gif" align="absmiddle" border="0"/> <b><a href="Optimistic Locking.html" title="Optimistic Locking">Optimistic Locking</a></b> &#8211;  The optimistic locking protocol provides better performance and scalability when having concurrent access to the same data. Optimistic locking offers higher concurrency and better performance than pessimistic locking. It also avoids deadlocks.
</p>

<p><img src="download/attachments/53903503/referto.gif" align="absmiddle" border="0"/> <b><a href="GigaSpaces Read Modifiers.html" title="GigaSpaces Read Modifiers">Read Modifiers</a></b> &#8211; GigaSpaces <tt>EXCLUSIVE_READ_LOCK</tt>, <tt>READ_COMMITTED</tt>, <tt>DIRTY_READ</tt>, and <tt>REPEATABLE_READ</tt> modifiers.</p>

                     </td>
</tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td height="12" background="http://www.gigaspaces.com/wiki/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
</tr>
<tr>
<td align="center"><font color="grey"><a href="http://www.gigaspaces.com">GigaSpaces.com</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xwBmAg" class="smalltext">Legal Notice</a> -
		<a href="http://www.gigaspaces.com/wiki/x/xgBmAg" class="smalltext">3rd Party Licenses</a> -
		<a href="http://www.gigaspaces.com/wiki/x/BQFmAg" class="smalltext">Site Map</a> -
		<a href="http://www.gigaspaces.com/wiki/display/API/API+Documentation+Portal" class="version-link">API Docs</a> -
		<a href="http://forum.openspaces.org/forum.jspa?forumID=175" class="version-link">Forum</a> -
		<a href="http://www.gigaspaces.com/LatestProductVersion" class="version-link">Downloads</a> -
		<a href="http://blog.gigaspaces.com/" class="version-link">Blog</a> -
		<a href="http://www.gigaspaces.com/os_papers.html" class="version-link">White Papers</a> -
		<a href="mailto:techw@gigaspaces.com">Contact Tech Writing</a> -
		<i><a href="http://www.atlassian.com/software/confluence">Gen. by Atlassian Confluence</a></i></font></td>
</tr>
</table>
     </body>
</html>
